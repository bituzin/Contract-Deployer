import{gV as Cn,bW as dr,bX as hr,cS as Zs,gW as Tn,bU as On,bV as Rn,cT as Ws,ah as K,fc as $n,aq as pr,aS as ae,bZ as gr,aU as ce,gv as Dt,an as ue,gX as Gs,gY as Rt,gZ as L,g_ as it,g$ as Ys,h0 as mr,h1 as tn,bT as nt,cx as U,am as pe,ga as Ut,gz as $t,gi as Jt,h2 as zn,h3 as br,a$ as en,ci as yr,h4 as Ln,h5 as Ks,cv as wr,aW as q,co as xr,cn as Xs,h6 as Js,cs as mt,h7 as nn,aH as vr,eW as Un,aE as Qs,gM as to,ao as Er,h8 as Br,bz as fe,gC as vt,gb as Ar,eU as eo,aK as ge,aX as Ir,aY as no,b$ as Pe,aR as ro,gw as so,aV as oo,aZ as io,a_ as ao,h9 as co,f2 as uo,al as me,cw as fo,bp as Sr,ct as lo,ha as rn,hb as Nr,hc as j,hd as dt,he as sn,hf as X,hg as Y,hh as Vt,hi as Pr,hj as ho,hk as on,hl as po,hm as _n,c1 as kr,hn as be,ho as Cr,hp as Tr,dd as Or,eR as Rr,ff as $r,hq as go,hr as mo,gB as bo,hs as yo,fB as wo,ht as He,de as xo,ca as Et,c7 as vo,hu as zr,dc as qn,cp as Eo,dg as Bo,fa as Ao,gr as Io,fb as So,aj as Zt,hv as Wt,hw as ye,hx as jt,hy as an,g9 as Lr,eZ as Ur,e_ as _r,hz as cn,fI as qr,fZ as No,fC as Po,cq as ko,cF as Co,hA as To,c6 as Hn,cu as Oo,cy as Hr,hB as Ro,bx as $o,gH as zo,cB as Lo,hC as Uo,hD as _o,hE as qo,hF as Ho,hG as Fo,cI as Mo,hH as jo,cC as Do,cJ as Vo,cA as Zo,hI as Wo,hJ as Go,cH as Yo}from"./index-6e4b0420.js";import{l as un}from"./localBatchGatewayRequest-9044e958.js";import{secp256k1 as Fr}from"./secp256k1-d20845b0.js";import{h as Mr,a as Ko}from"./hashTypedData-403e3a1f.js";function Fn(t){let e;if(typeof t=="string")e=Cn(t);else{const n=dr(t),r=t.length;for(let s=0;s<r;s++){const o=t[s];if(!hr(o)){e=Cn(o,n);break}}}if(!e)throw new Zs({signature:t});return e}function Mn(t){const e=[];if(typeof t=="string"){const n=Tn(t),r=n.length;for(let s=0;s<r;s++)e.push(On(n[s],{modifiers:Rn}))}else{const n=dr(t),r=t.length;for(let s=0;s<r;s++){const o=t[s];if(hr(o))continue;const i=Tn(o),c=i.length;for(let a=0;a<c;a++)e.push(On(i[a],{modifiers:Rn,structs:n}))}}if(e.length===0)throw new Ws({params:t});return e}function fn(t){var n,r,s,o,i,c;if(!(t instanceof K))return!1;const e=t.walk(a=>a instanceof $n);return e instanceof $n?((n=e.data)==null?void 0:n.errorName)==="HttpError"||((r=e.data)==null?void 0:r.errorName)==="ResolverError"||((s=e.data)==null?void 0:s.errorName)==="ResolverNotContract"||((o=e.data)==null?void 0:o.errorName)==="ResolverNotFound"||((i=e.data)==null?void 0:i.errorName)==="ReverseAddressMismatch"||((c=e.data)==null?void 0:c.errorName)==="UnsupportedResolverProfile":!1}function jr(t){if(t.length!==66||t.indexOf("[")!==0||t.indexOf("]")!==65)return null;const e=`0x${t.slice(1,65)}`;return pr(e)?e:null}function Fe(t){let e=new Uint8Array(32).fill(0);if(!t)return ae(e);const n=t.split(".");for(let r=n.length-1;r>=0;r-=1){const s=jr(n[r]),o=s?gr(s):ce(Dt(n[r]),"bytes");e=ce(ue([e,o]),"bytes")}return ae(e)}function Xo(t){return`[${t.slice(2)}]`}function Jo(t){const e=new Uint8Array(32).fill(0);return t?jr(t)||ce(Dt(t)):ae(e)}function ln(t){const e=t.replace(/^\.|\.$/gm,"");if(e.length===0)return new Uint8Array(1);const n=new Uint8Array(Dt(e).byteLength+2);let r=0;const s=e.split(".");for(let o=0;o<s.length;o++){let i=Dt(s[o]);i.byteLength>255&&(i=Dt(Xo(Jo(s[o])))),n[r]=i.length,n.set(i,r+1),r+=i.length+1}return n.byteLength!==r+1?n.slice(0,r+1):n}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const dn=BigInt(0),Me=BigInt(1);function Qt(t){return t instanceof Uint8Array||ArrayBuffer.isView(t)&&t.constructor.name==="Uint8Array"}function hn(t){if(!Qt(t))throw new Error("Uint8Array expected")}function Gt(t,e){if(typeof e!="boolean")throw new Error(t+" boolean expected, got "+e)}function se(t){const e=t.toString(16);return e.length&1?"0"+e:e}function Dr(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);return t===""?dn:BigInt("0x"+t)}const Vr=typeof Uint8Array.from([]).toHex=="function"&&typeof Uint8Array.fromHex=="function",Qo=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0"));function Yt(t){if(hn(t),Vr)return t.toHex();let e="";for(let n=0;n<t.length;n++)e+=Qo[t[n]];return e}const at={_0:48,_9:57,A:65,F:70,a:97,f:102};function jn(t){if(t>=at._0&&t<=at._9)return t-at._0;if(t>=at.A&&t<=at.F)return t-(at.A-10);if(t>=at.a&&t<=at.f)return t-(at.a-10)}function le(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);if(Vr)return Uint8Array.fromHex(t);const e=t.length,n=e/2;if(e%2)throw new Error("hex string expected, got unpadded hex of length "+e);const r=new Uint8Array(n);for(let s=0,o=0;s<n;s++,o+=2){const i=jn(t.charCodeAt(o)),c=jn(t.charCodeAt(o+1));if(i===void 0||c===void 0){const a=t[o]+t[o+1];throw new Error('hex string expected, got non-hex character "'+a+'" at index '+o)}r[s]=i*16+c}return r}function xt(t){return Dr(Yt(t))}function Zr(t){return hn(t),Dr(Yt(Uint8Array.from(t).reverse()))}function te(t,e){return le(t.toString(16).padStart(e*2,"0"))}function Wr(t,e){return te(t,e).reverse()}function Q(t,e,n){let r;if(typeof e=="string")try{r=le(e)}catch(o){throw new Error(t+" must be hex string or Uint8Array, cause: "+o)}else if(Qt(e))r=Uint8Array.from(e);else throw new Error(t+" must be hex string or Uint8Array");const s=r.length;if(typeof n=="number"&&s!==n)throw new Error(t+" of length "+n+" expected, got "+s);return r}function de(...t){let e=0;for(let r=0;r<t.length;r++){const s=t[r];hn(s),e+=s.length}const n=new Uint8Array(e);for(let r=0,s=0;r<t.length;r++){const o=t[r];n.set(o,s),s+=o.length}return n}const ke=t=>typeof t=="bigint"&&dn<=t;function pn(t,e,n){return ke(t)&&ke(e)&&ke(n)&&e<=t&&t<n}function Tt(t,e,n,r){if(!pn(e,n,r))throw new Error("expected valid "+t+": "+n+" <= n < "+r+", got "+e)}function ti(t){let e;for(e=0;t>dn;t>>=Me,e+=1);return e}const we=t=>(Me<<BigInt(t))-Me,Ce=t=>new Uint8Array(t),Dn=t=>Uint8Array.from(t);function ei(t,e,n){if(typeof t!="number"||t<2)throw new Error("hashLen must be a number");if(typeof e!="number"||e<2)throw new Error("qByteLen must be a number");if(typeof n!="function")throw new Error("hmacFn must be a function");let r=Ce(t),s=Ce(t),o=0;const i=()=>{r.fill(1),s.fill(0),o=0},c=(...l)=>n(s,r,...l),a=(l=Ce(0))=>{s=c(Dn([0]),l),r=c(),l.length!==0&&(s=c(Dn([1]),l),r=c())},u=()=>{if(o++>=1e3)throw new Error("drbg: tried 1000 values");let l=0;const d=[];for(;l<e;){r=c();const h=r.slice();d.push(h),l+=r.length}return de(...d)};return(l,d)=>{i(),a(l);let h;for(;!(h=d(u()));)a();return i(),h}}const ni={bigint:t=>typeof t=="bigint",function:t=>typeof t=="function",boolean:t=>typeof t=="boolean",string:t=>typeof t=="string",stringOrUint8Array:t=>typeof t=="string"||Qt(t),isSafeInteger:t=>Number.isSafeInteger(t),array:t=>Array.isArray(t),field:(t,e)=>e.Fp.isValid(t),hash:t=>typeof t=="function"&&Number.isSafeInteger(t.outputLen)};function xe(t,e,n={}){const r=(s,o,i)=>{const c=ni[o];if(typeof c!="function")throw new Error("invalid validator function");const a=t[s];if(!(i&&a===void 0)&&!c(a,t))throw new Error("param "+String(s)+" is invalid. Expected "+o+", got "+a)};for(const[s,o]of Object.entries(e))r(s,o,!1);for(const[s,o]of Object.entries(n))r(s,o,!0);return t}function Vn(t){const e=new WeakMap;return(n,...r)=>{const s=e.get(n);if(s!==void 0)return s;const o=t(n,...r);return e.set(n,o),o}}function ee(t,e){if(ot(t)>e)throw new xi({givenSize:ot(t),maxSize:e})}function ri(t,e){if(typeof e=="number"&&e>0&&e>ot(t)-1)throw new Kr({offset:e,position:"start",size:ot(t)})}function si(t,e,n){if(typeof e=="number"&&typeof n=="number"&&ot(t)!==n-e)throw new Kr({offset:n,position:"end",size:ot(t)})}const ct={zero:48,nine:57,A:65,F:70,a:97,f:102};function Zn(t){if(t>=ct.zero&&t<=ct.nine)return t-ct.zero;if(t>=ct.A&&t<=ct.F)return t-(ct.A-10);if(t>=ct.a&&t<=ct.f)return t-(ct.a-10)}function oi(t,e={}){const{dir:n,size:r=32}=e;if(r===0)return t;if(t.length>r)throw new vi({size:t.length,targetSize:r,type:"Bytes"});const s=new Uint8Array(r);for(let o=0;o<r;o++){const i=n==="right";s[i?o:r-o-1]=t[i?o:t.length-o-1]}return s}function Gr(t,e={}){const{dir:n="left"}=e;let r=t,s=0;for(let o=0;o<r.length-1&&r[n==="left"?o:r.length-o-1].toString()==="0";o++)s++;return r=n==="left"?r.slice(s):r.slice(0,r.length-s),r}const ii=new TextDecoder,ai=new TextEncoder;function ci(t){if(!(t instanceof Uint8Array)){if(!t)throw new oe(t);if(typeof t!="object")throw new oe(t);if(!("BYTES_PER_ELEMENT"in t))throw new oe(t);if(t.BYTES_PER_ELEMENT!==1||t.constructor.name!=="Uint8Array")throw new oe(t)}}function ui(t){return t instanceof Uint8Array?t:typeof t=="string"?gn(t):fi(t)}function fi(t){return t instanceof Uint8Array?t:new Uint8Array(t)}function gn(t,e={}){const{size:n}=e;let r=t;n&&(Gs(t,n),r=Rt(t,n));let s=r.slice(2);s.length%2&&(s=`0${s}`);const o=s.length/2,i=new Uint8Array(o);for(let c=0,a=0;c<o;c++){const u=Zn(s.charCodeAt(a++)),f=Zn(s.charCodeAt(a++));if(u===void 0||f===void 0)throw new L(`Invalid byte sequence ("${s[a-2]}${s[a-1]}" in "${s}").`);i[c]=u*16+f}return i}function li(t,e={}){const{size:n}=e,r=ai.encode(t);return typeof n=="number"?(ee(r,n),di(r,n)):r}function di(t,e){return oi(t,{dir:"right",size:e})}function ot(t){return t.length}function hi(t,e,n,r={}){const{strict:s}=r;ri(t,e);const o=t.slice(e,n);return s&&si(o,e,n),o}function pi(t,e={}){const{size:n}=e;typeof n<"u"&&ee(t,n);const r=it(t,e);return Ys(r,e)}function gi(t,e={}){const{size:n}=e;let r=t;if(typeof n<"u"&&(ee(r,n),r=Yr(r)),r.length>1||r[0]>1)throw new wi(r);return!!r[0]}function lt(t,e={}){const{size:n}=e;typeof n<"u"&&ee(t,n);const r=it(t,e);return mr(r,e)}function mi(t,e={}){const{size:n}=e;let r=t;return typeof n<"u"&&(ee(r,n),r=bi(r)),ii.decode(r)}function Yr(t){return Gr(t,{dir:"left"})}function bi(t){return Gr(t,{dir:"right"})}function yi(t){try{return ci(t),!0}catch{return!1}}class wi extends L{constructor(e){super(`Bytes value \`${e}\` is not a valid boolean.`,{metaMessages:["The bytes array must contain a single byte of either a `0` or `1` value."]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Bytes.InvalidBytesBooleanError"})}}class oe extends L{constructor(e){super(`Value \`${typeof e=="object"?tn(e):e}\` of type \`${typeof e}\` is an invalid Bytes value.`,{metaMessages:["Bytes values must be of type `Bytes`."]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Bytes.InvalidBytesTypeError"})}}class xi extends L{constructor({givenSize:e,maxSize:n}){super(`Size cannot exceed \`${n}\` bytes. Given size: \`${e}\` bytes.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Bytes.SizeOverflowError"})}}class Kr extends L{constructor({offset:e,position:n,size:r}){super(`Slice ${n==="start"?"starting":"ending"} at offset \`${e}\` is out-of-bounds (size: \`${r}\`).`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Bytes.SliceOffsetOutOfBoundsError"})}}class vi extends L{constructor({size:e,targetSize:n,type:r}){super(`${r.charAt(0).toUpperCase()}${r.slice(1).toLowerCase()} size (\`${e}\`) exceeds padding size (\`${n}\`).`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Bytes.SizeExceedsPaddingSizeError"})}}async function et(t,e){const{abi:n,address:r,args:s,functionName:o,...i}=e,c=nt({abi:n,args:s,functionName:o});try{const{data:a}=await U(t,pe,"call")({...i,data:c,to:r});return Ut({abi:n,args:s,functionName:o,data:a||"0x"})}catch(a){throw $t(a,{abi:n,address:r,args:s,docsPath:"/docs/contract/readContract",functionName:o})}}async function Ei(t,e){const{blockNumber:n,blockTag:r,coinType:s,name:o,gatewayUrls:i,strict:c}=e,{chain:a}=t,u=(()=>{if(e.universalResolverAddress)return e.universalResolverAddress;if(!a)throw new Error("client chain not configured. universalResolverAddress is required.");return Jt({blockNumber:n,chain:a,contract:"ensUniversalResolver"})})(),f=a==null?void 0:a.ensTlds;if(f&&!f.some(d=>o.endsWith(d)))return null;const l=(()=>s!=null?[Fe(o),BigInt(s)]:[Fe(o)])();try{const d=nt({abi:zn,functionName:"addr",args:l}),h={address:u,abi:br,functionName:"resolveWithGateways",args:[en(ln(o)),d,i??[un]],blockNumber:n,blockTag:r},g=await U(t,et,"readContract")(h);if(g[0]==="0x")return null;const A=Ut({abi:zn,args:l,functionName:"addr",data:g[0]});return A==="0x"||yr(A)==="0x00"?null:A}catch(d){if(c)throw d;if(fn(d))return null;throw d}}class Bi extends K{constructor({data:e}){super("Unable to extract image from metadata. The metadata may be malformed or invalid.",{metaMessages:["- Metadata must be a JSON object with at least an `image`, `image_url` or `image_data` property.","",`Provided data: ${JSON.stringify(e)}`],name:"EnsAvatarInvalidMetadataError"})}}class Ft extends K{constructor({reason:e}){super(`ENS NFT avatar URI is invalid. ${e}`,{name:"EnsAvatarInvalidNftUriError"})}}class mn extends K{constructor({uri:e}){super(`Unable to resolve ENS avatar URI "${e}". The URI may be malformed, invalid, or does not respond with a valid image.`,{name:"EnsAvatarUriResolutionError"})}}class Ai extends K{constructor({namespace:e}){super(`ENS NFT avatar namespace "${e}" is not supported. Must be "erc721" or "erc1155".`,{name:"EnsAvatarUnsupportedNamespaceError"})}}class Ju extends K{constructor({chainId:e}){super(`Invalid ENSIP-11 chainId: ${e}. Must be between 0 and 0x7fffffff, or 1.`,{name:"EnsInvalidChainIdError"})}}const Ii=/(?<protocol>https?:\/\/[^/]*|ipfs:\/|ipns:\/|ar:\/)?(?<root>\/)?(?<subpath>ipfs\/|ipns\/)?(?<target>[\w\-.]+)(?<subtarget>\/.*)?/,Si=/^(Qm[1-9A-HJ-NP-Za-km-z]{44,}|b[A-Za-z2-7]{58,}|B[A-Z2-7]{58,}|z[1-9A-HJ-NP-Za-km-z]{48,}|F[0-9A-F]{50,})(\/(?<target>[\w\-.]+))?(?<subtarget>\/.*)?$/,Ni=/^data:([a-zA-Z\-/+]*);base64,([^"].*)/,Pi=/^data:([a-zA-Z\-/+]*)?(;[a-zA-Z0-9].*?)?(,)/;async function ki(t){try{const e=await fetch(t,{method:"HEAD"});if(e.status===200){const n=e.headers.get("content-type");return n==null?void 0:n.startsWith("image/")}return!1}catch(e){return typeof e=="object"&&typeof e.response<"u"||!Object.hasOwn(globalThis,"Image")?!1:new Promise(n=>{const r=new Image;r.onload=()=>{n(!0)},r.onerror=()=>{n(!1)},r.src=t})}}function Wn(t,e){return t?t.endsWith("/")?t.slice(0,-1):t:e}function Xr({uri:t,gatewayUrls:e}){const n=Ni.test(t);if(n)return{uri:t,isOnChain:!0,isEncoded:n};const r=Wn(e==null?void 0:e.ipfs,"https://ipfs.io"),s=Wn(e==null?void 0:e.arweave,"https://arweave.net"),o=t.match(Ii),{protocol:i,subpath:c,target:a,subtarget:u=""}=(o==null?void 0:o.groups)||{},f=i==="ipns:/"||c==="ipns/",l=i==="ipfs:/"||c==="ipfs/"||Si.test(t);if(t.startsWith("http")&&!f&&!l){let h=t;return e!=null&&e.arweave&&(h=t.replace(/https:\/\/arweave.net/g,e==null?void 0:e.arweave)),{uri:h,isOnChain:!1,isEncoded:!1}}if((f||l)&&a)return{uri:`${r}/${f?"ipns":"ipfs"}/${a}${u}`,isOnChain:!1,isEncoded:!1};if(i==="ar:/"&&a)return{uri:`${s}/${a}${u||""}`,isOnChain:!1,isEncoded:!1};let d=t.replace(Pi,"");if(d.startsWith("<svg")&&(d=`data:image/svg+xml;base64,${btoa(d)}`),d.startsWith("data:")||d.startsWith("{"))return{uri:d,isOnChain:!0,isEncoded:!1};throw new mn({uri:t})}function Jr(t){if(typeof t!="object"||!("image"in t)&&!("image_url"in t)&&!("image_data"in t))throw new Bi({data:t});return t.image||t.image_url||t.image_data}async function Ci({gatewayUrls:t,uri:e}){try{const n=await fetch(e).then(s=>s.json());return await bn({gatewayUrls:t,uri:Jr(n)})}catch{throw new mn({uri:e})}}async function bn({gatewayUrls:t,uri:e}){const{uri:n,isOnChain:r}=Xr({uri:e,gatewayUrls:t});if(r||await ki(n))return n;throw new mn({uri:e})}function Ti(t){let e=t;e.startsWith("did:nft:")&&(e=e.replace("did:nft:","").replace(/_/g,"/"));const[n,r,s]=e.split("/"),[o,i]=n.split(":"),[c,a]=r.split(":");if(!o||o.toLowerCase()!=="eip155")throw new Ft({reason:"Only EIP-155 supported"});if(!i)throw new Ft({reason:"Chain ID not found"});if(!a)throw new Ft({reason:"Contract address not found"});if(!s)throw new Ft({reason:"Token ID not found"});if(!c)throw new Ft({reason:"ERC namespace not found"});return{chainID:Number.parseInt(i,10),namespace:c.toLowerCase(),contractAddress:a,tokenID:s}}async function Oi(t,{nft:e}){if(e.namespace==="erc721")return et(t,{address:e.contractAddress,abi:[{name:"tokenURI",type:"function",stateMutability:"view",inputs:[{name:"tokenId",type:"uint256"}],outputs:[{name:"",type:"string"}]}],functionName:"tokenURI",args:[BigInt(e.tokenID)]});if(e.namespace==="erc1155")return et(t,{address:e.contractAddress,abi:[{name:"uri",type:"function",stateMutability:"view",inputs:[{name:"_id",type:"uint256"}],outputs:[{name:"",type:"string"}]}],functionName:"uri",args:[BigInt(e.tokenID)]});throw new Ai({namespace:e.namespace})}async function Ri(t,{gatewayUrls:e,record:n}){return/eip155:/i.test(n)?$i(t,{gatewayUrls:e,record:n}):bn({uri:n,gatewayUrls:e})}async function $i(t,{gatewayUrls:e,record:n}){const r=Ti(n),s=await Oi(t,{nft:r}),{uri:o,isOnChain:i,isEncoded:c}=Xr({uri:s,gatewayUrls:e});if(i&&(o.includes("data:application/json;base64,")||o.startsWith("{"))){const u=c?atob(o.replace("data:application/json;base64,","")):o,f=JSON.parse(u);return bn({uri:Jr(f),gatewayUrls:e})}let a=r.tokenID;return r.namespace==="erc1155"&&(a=a.replace("0x","").padStart(64,"0")),Ci({gatewayUrls:e,uri:o.replace(/(?:0x)?{id}/,a)})}async function Qr(t,e){const{blockNumber:n,blockTag:r,key:s,name:o,gatewayUrls:i,strict:c}=e,{chain:a}=t,u=(()=>{if(e.universalResolverAddress)return e.universalResolverAddress;if(!a)throw new Error("client chain not configured. universalResolverAddress is required.");return Jt({blockNumber:n,chain:a,contract:"ensUniversalResolver"})})(),f=a==null?void 0:a.ensTlds;if(f&&!f.some(l=>o.endsWith(l)))return null;try{const l={address:u,abi:br,args:[en(ln(o)),nt({abi:Ln,functionName:"text",args:[Fe(o),s]}),i??[un]],functionName:"resolveWithGateways",blockNumber:n,blockTag:r},h=await U(t,et,"readContract")(l);if(h[0]==="0x")return null;const y=Ut({abi:Ln,functionName:"text",data:h[0]});return y===""?null:y}catch(l){if(c)throw l;if(fn(l))return null;throw l}}async function zi(t,{blockNumber:e,blockTag:n,assetGatewayUrls:r,name:s,gatewayUrls:o,strict:i,universalResolverAddress:c}){const a=await U(t,Qr,"getEnsText")({blockNumber:e,blockTag:n,key:"avatar",name:s,universalResolverAddress:c,gatewayUrls:o,strict:i});if(!a)return null;try{return await Ri(t,{record:a,gatewayUrls:r})}catch{return null}}async function Li(t,e){const{address:n,blockNumber:r,blockTag:s,coinType:o=60n,gatewayUrls:i,strict:c}=e,{chain:a}=t,u=(()=>{if(e.universalResolverAddress)return e.universalResolverAddress;if(!a)throw new Error("client chain not configured. universalResolverAddress is required.");return Jt({blockNumber:r,chain:a,contract:"ensUniversalResolver"})})();try{const f={address:u,abi:Ks,args:[n,o,i??[un]],functionName:"reverseWithGateways",blockNumber:r,blockTag:s},l=U(t,et,"readContract"),[d]=await l(f);return d||null}catch(f){if(c)throw f;if(fn(f))return null;throw f}}async function Ui(t,e){const{blockNumber:n,blockTag:r,name:s}=e,{chain:o}=t,i=(()=>{if(e.universalResolverAddress)return e.universalResolverAddress;if(!o)throw new Error("client chain not configured. universalResolverAddress is required.");return Jt({blockNumber:n,chain:o,contract:"ensUniversalResolver"})})(),c=o==null?void 0:o.ensTlds;if(c&&!c.some(u=>s.endsWith(u)))throw new Error(`${s} is not a valid ENS TLD (${c==null?void 0:c.join(", ")}) for chain "${o.name}" (id: ${o.id}).`);const[a]=await U(t,et,"readContract")({address:i,abi:[{inputs:[{type:"bytes"}],name:"findResolver",outputs:[{type:"address"},{type:"bytes32"},{type:"uint256"}],stateMutability:"view",type:"function"}],functionName:"findResolver",args:[en(ln(s))],blockNumber:n,blockTag:r});return a}async function ts(t,e){var A,b,N;const{account:n=t.account,blockNumber:r,blockTag:s="latest",blobs:o,data:i,gas:c,gasPrice:a,maxFeePerBlobGas:u,maxFeePerGas:f,maxPriorityFeePerGas:l,to:d,value:h,...y}=e,g=n?mt(n):void 0;try{wr(e);const p=(typeof r=="bigint"?q(r):void 0)||s,w=(N=(b=(A=t.chain)==null?void 0:A.formatters)==null?void 0:b.transactionRequest)==null?void 0:N.format,v=(w||xr)({...Xs(y,{format:w}),account:g,blobs:o,data:i,gas:c,gasPrice:a,maxFeePerBlobGas:u,maxFeePerGas:f,maxPriorityFeePerGas:l,to:d,value:h},"createAccessList"),S=await t.request({method:"eth_createAccessList",params:[v,p]});return{accessList:S.accessList,gasUsed:BigInt(S.gasUsed)}}catch(m){throw Js(m,{...e,account:g,chain:t.chain})}}async function _i(t){const e=nn(t,{method:"eth_newBlockFilter"}),n=await t.request({method:"eth_newBlockFilter"});return{id:n,request:e(n),type:"block"}}class qi extends K{constructor(e){super(`Filter type "${e}" is not supported.`,{name:"FilterTypeNotSupportedError"})}}const Gn="/docs/contract/encodeEventTopics";function ne(t){var a;const{abi:e,eventName:n,args:r}=t;let s=e[0];if(n){const u=vr({abi:e,name:n});if(!u)throw new Un(n,{docsPath:Gn});s=u}if(s.type!=="event")throw new Un(void 0,{docsPath:Gn});const o=Qs(s),i=to(o);let c=[];if(r&&"inputs"in s){const u=(a=s.inputs)==null?void 0:a.filter(l=>"indexed"in l&&l.indexed),f=Array.isArray(r)?r:Object.values(r).length>0?(u==null?void 0:u.map(l=>r[l.name]))??[]:[];f.length>0&&(c=(u==null?void 0:u.map((l,d)=>Array.isArray(f[d])?f[d].map((h,y)=>Yn({param:l,value:f[d][y]})):typeof f[d]<"u"&&f[d]!==null?Yn({param:l,value:f[d]}):null))??[])}return[i,...c]}function Yn({param:t,value:e}){if(t.type==="string"||t.type==="bytes")return ce(gr(e));if(t.type==="tuple"||t.type.match(/^(.*)\[(\d+)?\]$/))throw new qi(t.type);return Er([t],[e])}async function es(t,e){const{address:n,abi:r,args:s,eventName:o,fromBlock:i,strict:c,toBlock:a}=e,u=nn(t,{method:"eth_newFilter"}),f=o?ne({abi:r,args:s,eventName:o}):void 0,l=await t.request({method:"eth_newFilter",params:[{address:n,fromBlock:typeof i=="bigint"?q(i):i,toBlock:typeof a=="bigint"?q(a):a,topics:f}]});return{abi:r,args:s,eventName:o,id:l,request:u(l),strict:!!c,type:"event"}}async function ns(t,{address:e,args:n,event:r,events:s,fromBlock:o,strict:i,toBlock:c}={}){const a=s??(r?[r]:void 0),u=nn(t,{method:"eth_newFilter"});let f=[];a&&(f=[a.flatMap(h=>ne({abi:[h],eventName:h.name,args:n}))],r&&(f=f[0]));const l=await t.request({method:"eth_newFilter",params:[{address:e,fromBlock:typeof o=="bigint"?q(o):o,toBlock:typeof c=="bigint"?q(c):c,...f.length?{topics:f}:{}}]});return{abi:a,args:n,eventName:r?r.name:void 0,fromBlock:o,id:l,request:u(l),strict:!!i,toBlock:c,type:"event"}}async function Hi(t,e){const{abi:n,address:r,args:s,functionName:o,dataSuffix:i,...c}=e,a=nt({abi:n,args:s,functionName:o});try{return await U(t,Br,"estimateGas")({data:`${a}${i?i.replace("0x",""):""}`,to:r,...c})}catch(u){const f=c.account?mt(c.account):void 0;throw $t(u,{abi:n,address:r,args:s,docsPath:"/docs/contract/estimateContractGas",functionName:o,sender:f==null?void 0:f.address})}}async function Fi(t){const e=await t.request({method:"eth_blobBaseFee"});return BigInt(e)}async function Mi(t,{blockHash:e,blockNumber:n,blockTag:r="latest"}={}){const s=n!==void 0?q(n):void 0;let o;return e?o=await t.request({method:"eth_getBlockTransactionCountByHash",params:[e]},{dedupe:!0}):o=await t.request({method:"eth_getBlockTransactionCountByNumber",params:[s||r]},{dedupe:!!s}),fe(o)}async function je(t,{address:e,blockNumber:n,blockTag:r="latest"}){const s=n!==void 0?q(n):void 0,o=await t.request({method:"eth_getCode",params:[e,s||r]},{dedupe:!!s});if(o!=="0x")return o}async function yn(t,{address:e,blockHash:n,fromBlock:r,toBlock:s,event:o,events:i,args:c,strict:a}={}){const u=a??!1,f=i??(o?[o]:void 0);let l=[];f&&(l=[f.flatMap(g=>ne({abi:[g],eventName:g.name,args:i?void 0:c}))],o&&(l=l[0]));let d;n?d=await t.request({method:"eth_getLogs",params:[{address:e,topics:l,blockHash:n}]}):d=await t.request({method:"eth_getLogs",params:[{address:e,topics:l,fromBlock:typeof r=="bigint"?q(r):r,toBlock:typeof s=="bigint"?q(s):s}]});const h=d.map(y=>vt(y));return f?Ar({abi:f,args:c,logs:h,strict:u}):h}async function rs(t,e){const{abi:n,address:r,args:s,blockHash:o,eventName:i,fromBlock:c,toBlock:a,strict:u}=e,f=i?vr({abi:n,name:i}):void 0,l=f?void 0:n.filter(d=>d.type==="event");return U(t,yn,"getLogs")({address:r,args:s,blockHash:o,event:f,events:l,fromBlock:c,toBlock:a,strict:u})}class ji extends K{constructor({address:e}){super(`No EIP-712 domain found on contract "${e}".`,{metaMessages:["Ensure that:",`- The contract is deployed at the address "${e}".`,"- `eip712Domain()` function exists on the contract.","- `eip712Domain()` function matches signature to ERC-5267 specification."],name:"Eip712DomainNotFoundError"})}}async function Di(t,e){const{address:n,factory:r,factoryData:s}=e;try{const[o,i,c,a,u,f,l]=await U(t,et,"readContract")({abi:Vi,address:n,functionName:"eip712Domain",factory:r,factoryData:s});return{domain:{name:i,version:c,chainId:Number(a),verifyingContract:u,salt:f},extensions:l,fields:o}}catch(o){const i=o;throw i.name==="ContractFunctionExecutionError"&&i.cause.name==="ContractFunctionZeroDataError"?new ji({address:n}):i}}const Vi=[{inputs:[],name:"eip712Domain",outputs:[{name:"fields",type:"bytes1"},{name:"name",type:"string"},{name:"version",type:"string"},{name:"chainId",type:"uint256"},{name:"verifyingContract",type:"address"},{name:"salt",type:"bytes32"},{name:"extensions",type:"uint256[]"}],stateMutability:"view",type:"function"}];function Zi(t){var e;return{baseFeePerGas:t.baseFeePerGas.map(n=>BigInt(n)),gasUsedRatio:t.gasUsedRatio,oldestBlock:BigInt(t.oldestBlock),reward:(e=t.reward)==null?void 0:e.map(n=>n.map(r=>BigInt(r)))}}async function Wi(t,{blockCount:e,blockNumber:n,blockTag:r="latest",rewardPercentiles:s}){const o=typeof n=="bigint"?q(n):void 0,i=await t.request({method:"eth_feeHistory",params:[q(e),o||r,s]},{dedupe:!!o});return Zi(i)}async function Gi(t,{filter:e}){const n=e.strict??!1,s=(await e.request({method:"eth_getFilterLogs",params:[e.id]})).map(o=>vt(o));return e.abi?Ar({abi:e.abi,logs:s,strict:n}):s}function Qu(t,e){if(t.length!==e.length)throw new eo({expectedLength:t.length,givenLength:e.length});const n=[];for(let r=0;r<t.length;r++){const s=t[r],o=e[r];n.push(ss(s,o))}return ge(n)}function ss(t,e,n=!1){if(t==="address"){const i=e;if(!Ir(i))throw new no({address:i});return Pe(i.toLowerCase(),{size:n?32:null})}if(t==="string")return ro(e);if(t==="bytes")return e;if(t==="bool")return Pe(so(e),{size:n?32:1});const r=t.match(oo);if(r){const[i,c,a="256"]=r,u=Number.parseInt(a,10)/8;return q(e,{size:n?32:u,signed:c==="int"})}const s=t.match(io);if(s){const[i,c]=s;if(Number.parseInt(c,10)!==(e.length-2)/2)throw new ao({expectedSize:Number.parseInt(c,10),givenSize:(e.length-2)/2});return Pe(e,{dir:"right",size:n?32:null})}const o=t.match(co);if(o&&Array.isArray(e)){const[i,c]=o,a=[];for(let u=0;u<e.length;u++)a.push(ss(c,e[u],!0));return a.length===0?"0x":ge(a)}throw new uo(t)}async function Yi({address:t,authorization:e,signature:n}){return me(Sr(t),await fo({authorization:e,signature:n}))}function Ki(t){const{source:e}=t,n=new Map,r=new lo(8192),s=new Map,o=({address:i,chainId:c})=>`${i}.${c}`;return{async consume({address:i,chainId:c,client:a}){const u=o({address:i,chainId:c}),f=this.get({address:i,chainId:c,client:a});this.increment({address:i,chainId:c});const l=await f;return await e.set({address:i,chainId:c},l),r.set(u,l),l},async increment({address:i,chainId:c}){const a=o({address:i,chainId:c}),u=n.get(a)??0;n.set(a,u+1)},async get({address:i,chainId:c,client:a}){const u=o({address:i,chainId:c});let f=s.get(u);return f||(f=(async()=>{try{const d=await e.get({address:i,chainId:c,client:a}),h=r.get(u)??0;return h>0&&d<=h?h+1:(r.delete(u),d)}finally{this.reset({address:i,chainId:c})}})(),s.set(u,f)),(n.get(u)??0)+await f},reset({address:i,chainId:c}){const a=o({address:i,chainId:c});n.delete(a),s.delete(a)}}}function Xi(){return{async get(t){const{address:e,client:n}=t;return rn(n,{address:e,blockTag:"pending"})},set(){}}}const tf=Ki({source:Xi()}),Ji="0x6492649264926492649264926492649264926492649264926492649264926492",ef="0x0000000000000000000000000000000000000000000000000000000000000000";class Qi extends Map{constructor(e){super(),Object.defineProperty(this,"maxSize",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.maxSize=e}get(e){const n=super.get(e);return super.has(e)&&n!==void 0&&(this.delete(e),super.set(e,n)),n}set(e,n){if(super.set(e,n),this.maxSize&&this.size>this.maxSize){const r=this.keys().next().value;r&&this.delete(r)}return this}}const ta={checksum:new Qi(8192)},Te=ta.checksum,Pt=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */function ea(t){return t instanceof Uint8Array||ArrayBuffer.isView(t)&&t.constructor.name==="Uint8Array"}function Kt(t){if(!Number.isSafeInteger(t)||t<0)throw new Error("positive integer expected, got "+t)}function Bt(t,...e){if(!ea(t))throw new Error("Uint8Array expected");if(e.length>0&&!e.includes(t.length))throw new Error("Uint8Array expected of length "+e+", got length="+t.length)}function na(t){if(typeof t!="function"||typeof t.create!="function")throw new Error("Hash should be wrapped by utils.createHasher");Kt(t.outputLen),Kt(t.blockLen)}function zt(t,e=!0){if(t.destroyed)throw new Error("Hash instance has been destroyed");if(e&&t.finished)throw new Error("Hash#digest() has already been called")}function os(t,e){Bt(t);const n=e.outputLen;if(t.length<n)throw new Error("digestInto() expects output buffer of length at least "+n)}function ra(t){return new Uint32Array(t.buffer,t.byteOffset,Math.floor(t.byteLength/4))}function Lt(...t){for(let e=0;e<t.length;e++)t[e].fill(0)}function Oe(t){return new DataView(t.buffer,t.byteOffset,t.byteLength)}function rt(t,e){return t<<32-e|t>>>e}const sa=(()=>new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68)();function oa(t){return t<<24&4278190080|t<<8&16711680|t>>>8&65280|t>>>24&255}function ia(t){for(let e=0;e<t.length;e++)t[e]=oa(t[e]);return t}const Kn=sa?t=>t:ia;function aa(t){if(typeof t!="string")throw new Error("string expected");return new Uint8Array(new TextEncoder().encode(t))}function ve(t){return typeof t=="string"&&(t=aa(t)),Bt(t),t}function ca(...t){let e=0;for(let r=0;r<t.length;r++){const s=t[r];Bt(s),e+=s.length}const n=new Uint8Array(e);for(let r=0,s=0;r<t.length;r++){const o=t[r];n.set(o,s),s+=o.length}return n}class wn{}function is(t){const e=r=>t().update(ve(r)).digest(),n=t();return e.outputLen=n.outputLen,e.blockLen=n.blockLen,e.create=()=>t(),e}function ua(t=32){if(Pt&&typeof Pt.getRandomValues=="function")return Pt.getRandomValues(new Uint8Array(t));if(Pt&&typeof Pt.randomBytes=="function")return Uint8Array.from(Pt.randomBytes(t));throw new Error("crypto.getRandomValues must be defined")}function fa(t,e,n,r){if(typeof t.setBigUint64=="function")return t.setBigUint64(e,n,r);const s=BigInt(32),o=BigInt(4294967295),i=Number(n>>s&o),c=Number(n&o),a=r?4:0,u=r?0:4;t.setUint32(e+a,i,r),t.setUint32(e+u,c,r)}function la(t,e,n){return t&e^~t&n}function da(t,e,n){return t&e^t&n^e&n}class ha extends wn{constructor(e,n,r,s){super(),this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.blockLen=e,this.outputLen=n,this.padOffset=r,this.isLE=s,this.buffer=new Uint8Array(e),this.view=Oe(this.buffer)}update(e){zt(this),e=ve(e),Bt(e);const{view:n,buffer:r,blockLen:s}=this,o=e.length;for(let i=0;i<o;){const c=Math.min(s-this.pos,o-i);if(c===s){const a=Oe(e);for(;s<=o-i;i+=s)this.process(a,i);continue}r.set(e.subarray(i,i+c),this.pos),this.pos+=c,i+=c,this.pos===s&&(this.process(n,0),this.pos=0)}return this.length+=e.length,this.roundClean(),this}digestInto(e){zt(this),os(e,this),this.finished=!0;const{buffer:n,view:r,blockLen:s,isLE:o}=this;let{pos:i}=this;n[i++]=128,Lt(this.buffer.subarray(i)),this.padOffset>s-i&&(this.process(r,0),i=0);for(let l=i;l<s;l++)n[l]=0;fa(r,s-8,BigInt(this.length*8),o),this.process(r,0);const c=Oe(e),a=this.outputLen;if(a%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const u=a/4,f=this.get();if(u>f.length)throw new Error("_sha2: outputLen bigger than state");for(let l=0;l<u;l++)c.setUint32(4*l,f[l],o)}digest(){const{buffer:e,outputLen:n}=this;this.digestInto(e);const r=e.slice(0,n);return this.destroy(),r}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());const{blockLen:n,buffer:r,length:s,finished:o,destroyed:i,pos:c}=this;return e.destroyed=i,e.finished=o,e.length=s,e.pos=c,s%n&&e.buffer.set(r),e}clone(){return this._cloneInto()}}const pt=Uint32Array.from([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),ie=BigInt(2**32-1),Xn=BigInt(32);function pa(t,e=!1){return e?{h:Number(t&ie),l:Number(t>>Xn&ie)}:{h:Number(t>>Xn&ie)|0,l:Number(t&ie)|0}}function ga(t,e=!1){const n=t.length;let r=new Uint32Array(n),s=new Uint32Array(n);for(let o=0;o<n;o++){const{h:i,l:c}=pa(t[o],e);[r[o],s[o]]=[i,c]}return[r,s]}const ma=(t,e,n)=>t<<n|e>>>32-n,ba=(t,e,n)=>e<<n|t>>>32-n,ya=(t,e,n)=>e<<n-32|t>>>64-n,wa=(t,e,n)=>t<<n-32|e>>>64-n,xa=BigInt(0),Mt=BigInt(1),va=BigInt(2),Ea=BigInt(7),Ba=BigInt(256),Aa=BigInt(113),as=[],cs=[],us=[];for(let t=0,e=Mt,n=1,r=0;t<24;t++){[n,r]=[r,(2*n+3*r)%5],as.push(2*(5*r+n)),cs.push((t+1)*(t+2)/2%64);let s=xa;for(let o=0;o<7;o++)e=(e<<Mt^(e>>Ea)*Aa)%Ba,e&va&&(s^=Mt<<(Mt<<BigInt(o))-Mt);us.push(s)}const fs=ga(us,!0),Ia=fs[0],Sa=fs[1],Jn=(t,e,n)=>n>32?ya(t,e,n):ma(t,e,n),Qn=(t,e,n)=>n>32?wa(t,e,n):ba(t,e,n);function Na(t,e=24){const n=new Uint32Array(10);for(let r=24-e;r<24;r++){for(let i=0;i<10;i++)n[i]=t[i]^t[i+10]^t[i+20]^t[i+30]^t[i+40];for(let i=0;i<10;i+=2){const c=(i+8)%10,a=(i+2)%10,u=n[a],f=n[a+1],l=Jn(u,f,1)^n[c],d=Qn(u,f,1)^n[c+1];for(let h=0;h<50;h+=10)t[i+h]^=l,t[i+h+1]^=d}let s=t[2],o=t[3];for(let i=0;i<24;i++){const c=cs[i],a=Jn(s,o,c),u=Qn(s,o,c),f=as[i];s=t[f],o=t[f+1],t[f]=a,t[f+1]=u}for(let i=0;i<50;i+=10){for(let c=0;c<10;c++)n[c]=t[i+c];for(let c=0;c<10;c++)t[i+c]^=~n[(c+2)%10]&n[(c+4)%10]}t[0]^=Ia[r],t[1]^=Sa[r]}Lt(n)}class xn extends wn{constructor(e,n,r,s=!1,o=24){if(super(),this.pos=0,this.posOut=0,this.finished=!1,this.destroyed=!1,this.enableXOF=!1,this.blockLen=e,this.suffix=n,this.outputLen=r,this.enableXOF=s,this.rounds=o,Kt(r),!(0<e&&e<200))throw new Error("only keccak-f1600 function is supported");this.state=new Uint8Array(200),this.state32=ra(this.state)}clone(){return this._cloneInto()}keccak(){Kn(this.state32),Na(this.state32,this.rounds),Kn(this.state32),this.posOut=0,this.pos=0}update(e){zt(this),e=ve(e),Bt(e);const{blockLen:n,state:r}=this,s=e.length;for(let o=0;o<s;){const i=Math.min(n-this.pos,s-o);for(let c=0;c<i;c++)r[this.pos++]^=e[o++];this.pos===n&&this.keccak()}return this}finish(){if(this.finished)return;this.finished=!0;const{state:e,suffix:n,pos:r,blockLen:s}=this;e[r]^=n,n&128&&r===s-1&&this.keccak(),e[s-1]^=128,this.keccak()}writeInto(e){zt(this,!1),Bt(e),this.finish();const n=this.state,{blockLen:r}=this;for(let s=0,o=e.length;s<o;){this.posOut>=r&&this.keccak();const i=Math.min(r-this.posOut,o-s);e.set(n.subarray(this.posOut,this.posOut+i),s),this.posOut+=i,s+=i}return e}xofInto(e){if(!this.enableXOF)throw new Error("XOF is not possible for this instance");return this.writeInto(e)}xof(e){return Kt(e),this.xofInto(new Uint8Array(e))}digestInto(e){if(os(e,this),this.finished)throw new Error("digest() was already called");return this.writeInto(e),this.destroy(),e}digest(){return this.digestInto(new Uint8Array(this.outputLen))}destroy(){this.destroyed=!0,Lt(this.state)}_cloneInto(e){const{blockLen:n,suffix:r,outputLen:s,rounds:o,enableXOF:i}=this;return e||(e=new xn(n,r,s,i,o)),e.state32.set(this.state32),e.pos=this.pos,e.posOut=this.posOut,e.finished=this.finished,e.rounds=o,e.suffix=r,e.outputLen=s,e.enableXOF=i,e.destroyed=this.destroyed,e}}const Pa=(t,e,n)=>is(()=>new xn(e,t,n)),ka=(()=>Pa(1,136,256/8))(),Ca=Uint32Array.from([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),gt=new Uint32Array(64);class Ta extends ha{constructor(e=32){super(64,e,8,!1),this.A=pt[0]|0,this.B=pt[1]|0,this.C=pt[2]|0,this.D=pt[3]|0,this.E=pt[4]|0,this.F=pt[5]|0,this.G=pt[6]|0,this.H=pt[7]|0}get(){const{A:e,B:n,C:r,D:s,E:o,F:i,G:c,H:a}=this;return[e,n,r,s,o,i,c,a]}set(e,n,r,s,o,i,c,a){this.A=e|0,this.B=n|0,this.C=r|0,this.D=s|0,this.E=o|0,this.F=i|0,this.G=c|0,this.H=a|0}process(e,n){for(let l=0;l<16;l++,n+=4)gt[l]=e.getUint32(n,!1);for(let l=16;l<64;l++){const d=gt[l-15],h=gt[l-2],y=rt(d,7)^rt(d,18)^d>>>3,g=rt(h,17)^rt(h,19)^h>>>10;gt[l]=g+gt[l-7]+y+gt[l-16]|0}let{A:r,B:s,C:o,D:i,E:c,F:a,G:u,H:f}=this;for(let l=0;l<64;l++){const d=rt(c,6)^rt(c,11)^rt(c,25),h=f+d+la(c,a,u)+Ca[l]+gt[l]|0,g=(rt(r,2)^rt(r,13)^rt(r,22))+da(r,s,o)|0;f=u,u=a,a=c,c=i+h|0,i=o,o=s,s=r,r=h+g|0}r=r+this.A|0,s=s+this.B|0,o=o+this.C|0,i=i+this.D|0,c=c+this.E|0,a=a+this.F|0,u=u+this.G|0,f=f+this.H|0,this.set(r,s,o,i,c,a,u,f)}roundClean(){Lt(gt)}destroy(){this.set(0,0,0,0,0,0,0,0),Lt(this.buffer)}}const Oa=is(()=>new Ta);function Ee(t,e={}){const{as:n=typeof t=="string"?"Hex":"Bytes"}=e,r=ka(ui(t));return n==="Bytes"?r:it(r)}function ls(t,e={}){const{compressed:n}=e,{prefix:r,x:s,y:o}=t;if(n===!1||typeof s=="bigint"&&typeof o=="bigint"){if(r!==4)throw new tr({prefix:r,cause:new _a});return}if(n===!0||typeof s=="bigint"&&typeof o>"u"){if(r!==3&&r!==2)throw new tr({prefix:r,cause:new Ua});return}throw new La({publicKey:t})}function Ra(t){const e=(()=>{if(Nr(t))return ds(t);if(yi(t))return $a(t);const{prefix:n,x:r,y:s}=t;return typeof r=="bigint"&&typeof s=="bigint"?{prefix:n??4,x:r,y:s}:{prefix:n,x:r}})();return ls(e),e}function $a(t){return ds(it(t))}function ds(t){if(t.length!==132&&t.length!==130&&t.length!==68)throw new qa({publicKey:t});if(t.length===130){const r=BigInt(j(t,0,32)),s=BigInt(j(t,32,64));return{prefix:4,x:r,y:s}}if(t.length===132){const r=Number(j(t,0,1)),s=BigInt(j(t,1,33)),o=BigInt(j(t,33,65));return{prefix:r,x:s,y:o}}const e=Number(j(t,0,1)),n=BigInt(j(t,1,33));return{prefix:e,x:n}}function za(t,e={}){ls(t);const{prefix:n,x:r,y:s}=t,{includePrefix:o=!0}=e;return X(o?Y(n,{size:1}):"0x",Y(r,{size:32}),typeof s=="bigint"?Y(s,{size:32}):"0x")}class La extends L{constructor({publicKey:e}){super(`Value \`${tn(e)}\` is not a valid public key.`,{metaMessages:["Public key must contain:","- an `x` and `prefix` value (compressed)","- an `x`, `y`, and `prefix` value (uncompressed)"]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"PublicKey.InvalidError"})}}class tr extends L{constructor({prefix:e,cause:n}){super(`Prefix "${e}" is invalid.`,{cause:n}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"PublicKey.InvalidPrefixError"})}}class Ua extends L{constructor(){super("Prefix must be 2 or 3 for compressed public keys."),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"PublicKey.InvalidCompressedPrefixError"})}}class _a extends L{constructor(){super("Prefix must be 4 for uncompressed public keys."),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"PublicKey.InvalidUncompressedPrefixError"})}}let qa=class extends L{constructor({publicKey:e}){super(`Value \`${e}\` is an invalid public key size.`,{metaMessages:["Expected: 33 bytes (compressed + prefix), 64 bytes (uncompressed) or 65 bytes (uncompressed + prefix).",`Received ${dt(sn(e))} bytes.`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"PublicKey.InvalidSerializedSizeError"})}};const Ha=/^0x[a-fA-F0-9]{40}$/;function re(t,e={}){const{strict:n=!0}=e;if(!Ha.test(t))throw new er({address:t,cause:new ja});if(n){if(t.toLowerCase()===t)return;if(vn(t)!==t)throw new er({address:t,cause:new Da})}}function vn(t){if(Te.has(t))return Te.get(t);re(t,{strict:!1});const e=t.substring(2).toLowerCase(),n=Ee(li(e),{as:"Bytes"}),r=e.split("");for(let o=0;o<40;o+=2)n[o>>1]>>4>=8&&r[o]&&(r[o]=r[o].toUpperCase()),(n[o>>1]&15)>=8&&r[o+1]&&(r[o+1]=r[o+1].toUpperCase());const s=`0x${r.join("")}`;return Te.set(t,s),s}function Fa(t,e={}){const{checksum:n=!1}=e;return re(t),n?vn(t):t}function Ma(t,e={}){const n=Ee(`0x${za(t).slice(4)}`).substring(26);return Fa(`0x${n}`,e)}function De(t,e={}){const{strict:n=!0}=e??{};try{return re(t,{strict:n}),!0}catch{return!1}}class er extends L{constructor({address:e,cause:n}){super(`Address "${e}" is invalid.`,{cause:n}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Address.InvalidAddressError"})}}class ja extends L{constructor(){super("Address is not a 20 byte (40 hexadecimal character) value."),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Address.InvalidInputError"})}}class Da extends L{constructor(){super("Address does not match its checksum counterpart."),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Address.InvalidChecksumError"})}}const Va=/^(.*)\[([0-9]*)\]$/,Za=/^bytes([1-9]|1[0-9]|2[0-9]|3[0-2])?$/,hs=/^(u?int)(8|16|24|32|40|48|56|64|72|80|88|96|104|112|120|128|136|144|152|160|168|176|184|192|200|208|216|224|232|240|248|256)?$/,nr=2n**256n-1n;function Ot(t,e,n){const{checksumAddress:r,staticPosition:s}=n,o=An(e.type);if(o){const[i,c]=o;return Ga(t,{...e,type:c},{checksumAddress:r,length:i,staticPosition:s})}if(e.type==="tuple")return Ja(t,e,{checksumAddress:r,staticPosition:s});if(e.type==="address")return Wa(t,{checksum:r});if(e.type==="bool")return Ya(t);if(e.type.startsWith("bytes"))return Ka(t,e,{staticPosition:s});if(e.type.startsWith("uint")||e.type.startsWith("int"))return Xa(t,e);if(e.type==="string")return Qa(t,{staticPosition:s});throw new In(e.type)}const rr=32,Ve=32;function Wa(t,e={}){const{checksum:n=!1}=e,r=t.readBytes(32);return[(o=>n?vn(o):o)(it(hi(r,-20))),32]}function Ga(t,e,n){const{checksumAddress:r,length:s,staticPosition:o}=n;if(!s){const a=lt(t.readBytes(Ve)),u=o+a,f=u+rr;t.setPosition(u);const l=lt(t.readBytes(rr)),d=Xt(e);let h=0;const y=[];for(let g=0;g<l;++g){t.setPosition(f+(d?g*32:h));const[A,b]=Ot(t,e,{checksumAddress:r,staticPosition:f});h+=b,y.push(A)}return t.setPosition(o+32),[y,32]}if(Xt(e)){const a=lt(t.readBytes(Ve)),u=o+a,f=[];for(let l=0;l<s;++l){t.setPosition(u+l*32);const[d]=Ot(t,e,{checksumAddress:r,staticPosition:u});f.push(d)}return t.setPosition(o+32),[f,32]}let i=0;const c=[];for(let a=0;a<s;++a){const[u,f]=Ot(t,e,{checksumAddress:r,staticPosition:o+i});i+=f,c.push(u)}return[c,i]}function Ya(t){return[gi(t.readBytes(32),{size:32}),32]}function Ka(t,e,{staticPosition:n}){const[r,s]=e.type.split("bytes");if(!s){const i=lt(t.readBytes(32));t.setPosition(n+i);const c=lt(t.readBytes(32));if(c===0)return t.setPosition(n+32),["0x",32];const a=t.readBytes(c);return t.setPosition(n+32),[it(a),32]}return[it(t.readBytes(Number.parseInt(s,10),32)),32]}function Xa(t,e){const n=e.type.startsWith("int"),r=Number.parseInt(e.type.split("int")[1]||"256",10),s=t.readBytes(32);return[r>48?pi(s,{signed:n}):lt(s,{signed:n}),32]}function Ja(t,e,n){const{checksumAddress:r,staticPosition:s}=n,o=e.components.length===0||e.components.some(({name:a})=>!a),i=o?[]:{};let c=0;if(Xt(e)){const a=lt(t.readBytes(Ve)),u=s+a;for(let f=0;f<e.components.length;++f){const l=e.components[f];t.setPosition(u+c);const[d,h]=Ot(t,l,{checksumAddress:r,staticPosition:u});c+=h,i[o?f:l==null?void 0:l.name]=d}return t.setPosition(s+32),[i,32]}for(let a=0;a<e.components.length;++a){const u=e.components[a],[f,l]=Ot(t,u,{checksumAddress:r,staticPosition:s});i[o?a:u==null?void 0:u.name]=f,c+=l}return[i,c]}function Qa(t,{staticPosition:e}){const n=lt(t.readBytes(32)),r=e+n;t.setPosition(r);const s=lt(t.readBytes(32));if(s===0)return t.setPosition(e+32),["",32];const o=t.readBytes(s,32),i=mi(Yr(o));return t.setPosition(e+32),[i,32]}function tc({checksumAddress:t,parameters:e,values:n}){const r=[];for(let s=0;s<e.length;s++)r.push(En({checksumAddress:t,parameter:e[s],value:n[s]}));return r}function En({checksumAddress:t=!1,parameter:e,value:n}){const r=e,s=An(r.type);if(s){const[o,i]=s;return nc(n,{checksumAddress:t,length:o,parameter:{...r,type:i}})}if(r.type==="tuple")return ac(n,{checksumAddress:t,parameter:r});if(r.type==="address")return ec(n,{checksum:t});if(r.type==="bool")return sc(n);if(r.type.startsWith("uint")||r.type.startsWith("int")){const o=r.type.startsWith("int"),[,,i="256"]=hs.exec(r.type)??[];return oc(n,{signed:o,size:Number(i)})}if(r.type.startsWith("bytes"))return rc(n,{type:r.type});if(r.type==="string")return ic(n);throw new In(r.type)}function Bn(t){let e=0;for(let o=0;o<t.length;o++){const{dynamic:i,encoded:c}=t[o];i?e+=32:e+=dt(c)}const n=[],r=[];let s=0;for(let o=0;o<t.length;o++){const{dynamic:i,encoded:c}=t[o];i?(n.push(Y(e+s,{size:32})),r.push(c),s+=dt(c)):n.push(c)}return X(...n,...r)}function ec(t,e){const{checksum:n=!1}=e;return re(t,{strict:n}),{dynamic:!1,encoded:Vt(t.toLowerCase())}}function nc(t,e){const{checksumAddress:n,length:r,parameter:s}=e,o=r===null;if(!Array.isArray(t))throw new gc(t);if(!o&&t.length!==r)throw new pc({expectedLength:r,givenLength:t.length,type:`${s.type}[${r}]`});let i=!1;const c=[];for(let a=0;a<t.length;a++){const u=En({checksumAddress:n,parameter:s,value:t[a]});u.dynamic&&(i=!0),c.push(u)}if(o||i){const a=Bn(c);if(o){const u=Y(c.length,{size:32});return{dynamic:!0,encoded:c.length>0?X(u,a):u}}if(i)return{dynamic:!0,encoded:a}}return{dynamic:!1,encoded:X(...c.map(({encoded:a})=>a))}}function rc(t,{type:e}){const[,n]=e.split("bytes"),r=dt(t);if(!n){let s=t;return r%32!==0&&(s=Rt(s,Math.ceil((t.length-2)/2/32)*32)),{dynamic:!0,encoded:X(Vt(Y(r,{size:32})),s)}}if(r!==Number.parseInt(n,10))throw new ms({expectedSize:Number.parseInt(n,10),value:t});return{dynamic:!1,encoded:Rt(t)}}function sc(t){if(typeof t!="boolean")throw new L(`Invalid boolean value: "${t}" (type: ${typeof t}). Expected: \`true\` or \`false\`.`);return{dynamic:!1,encoded:Vt(Pr(t))}}function oc(t,{signed:e,size:n}){if(typeof n=="number"){const r=2n**(BigInt(n)-(e?1n:0n))-1n,s=e?-r-1n:0n;if(t>r||t<s)throw new ho({max:r.toString(),min:s.toString(),signed:e,size:n/8,value:t.toString()})}return{dynamic:!1,encoded:Y(t,{size:32,signed:e})}}function ic(t){const e=on(t),n=Math.ceil(dt(e)/32),r=[];for(let s=0;s<n;s++)r.push(Rt(j(e,s*32,(s+1)*32)));return{dynamic:!0,encoded:X(Rt(Y(dt(e),{size:32})),...r)}}function ac(t,e){const{checksumAddress:n,parameter:r}=e;let s=!1;const o=[];for(let i=0;i<r.components.length;i++){const c=r.components[i],a=Array.isArray(t)?i:c.name,u=En({checksumAddress:n,parameter:c,value:t[a]});o.push(u),u.dynamic&&(s=!0)}return{dynamic:s,encoded:s?Bn(o):X(...o.map(({encoded:i})=>i))}}function An(t){const e=t.match(/^(.*)\[(\d+)?\]$/);return e?[e[2]?Number(e[2]):null,e[1]]:void 0}function Xt(t){var r;const{type:e}=t;if(e==="string"||e==="bytes"||e.endsWith("[]"))return!0;if(e==="tuple")return(r=t.components)==null?void 0:r.some(Xt);const n=An(t.type);return!!(n&&Xt({...t,type:n[1]}))}const cc={bytes:new Uint8Array,dataView:new DataView(new ArrayBuffer(0)),position:0,positionReadCount:new Map,recursiveReadCount:0,recursiveReadLimit:Number.POSITIVE_INFINITY,assertReadLimit(){if(this.recursiveReadCount>=this.recursiveReadLimit)throw new fc({count:this.recursiveReadCount+1,limit:this.recursiveReadLimit})},assertPosition(t){if(t<0||t>this.bytes.length-1)throw new uc({length:this.bytes.length,position:t})},decrementPosition(t){if(t<0)throw new sr({offset:t});const e=this.position-t;this.assertPosition(e),this.position=e},getReadCount(t){return this.positionReadCount.get(t||this.position)||0},incrementPosition(t){if(t<0)throw new sr({offset:t});const e=this.position+t;this.assertPosition(e),this.position=e},inspectByte(t){const e=t??this.position;return this.assertPosition(e),this.bytes[e]},inspectBytes(t,e){const n=e??this.position;return this.assertPosition(n+t-1),this.bytes.subarray(n,n+t)},inspectUint8(t){const e=t??this.position;return this.assertPosition(e),this.bytes[e]},inspectUint16(t){const e=t??this.position;return this.assertPosition(e+1),this.dataView.getUint16(e)},inspectUint24(t){const e=t??this.position;return this.assertPosition(e+2),(this.dataView.getUint16(e)<<8)+this.dataView.getUint8(e+2)},inspectUint32(t){const e=t??this.position;return this.assertPosition(e+3),this.dataView.getUint32(e)},pushByte(t){this.assertPosition(this.position),this.bytes[this.position]=t,this.position++},pushBytes(t){this.assertPosition(this.position+t.length-1),this.bytes.set(t,this.position),this.position+=t.length},pushUint8(t){this.assertPosition(this.position),this.bytes[this.position]=t,this.position++},pushUint16(t){this.assertPosition(this.position+1),this.dataView.setUint16(this.position,t),this.position+=2},pushUint24(t){this.assertPosition(this.position+2),this.dataView.setUint16(this.position,t>>8),this.dataView.setUint8(this.position+2,t&255),this.position+=3},pushUint32(t){this.assertPosition(this.position+3),this.dataView.setUint32(this.position,t),this.position+=4},readByte(){this.assertReadLimit(),this._touch();const t=this.inspectByte();return this.position++,t},readBytes(t,e){this.assertReadLimit(),this._touch();const n=this.inspectBytes(t);return this.position+=e??t,n},readUint8(){this.assertReadLimit(),this._touch();const t=this.inspectUint8();return this.position+=1,t},readUint16(){this.assertReadLimit(),this._touch();const t=this.inspectUint16();return this.position+=2,t},readUint24(){this.assertReadLimit(),this._touch();const t=this.inspectUint24();return this.position+=3,t},readUint32(){this.assertReadLimit(),this._touch();const t=this.inspectUint32();return this.position+=4,t},get remaining(){return this.bytes.length-this.position},setPosition(t){const e=this.position;return this.assertPosition(t),this.position=t,()=>this.position=e},_touch(){if(this.recursiveReadLimit===Number.POSITIVE_INFINITY)return;const t=this.getReadCount();this.positionReadCount.set(this.position,t+1),t>0&&this.recursiveReadCount++}};function ps(t,{recursiveReadLimit:e=8192}={}){const n=Object.create(cc);return n.bytes=t,n.dataView=new DataView(t.buffer,t.byteOffset,t.byteLength),n.positionReadCount=new Map,n.recursiveReadLimit=e,n}class sr extends L{constructor({offset:e}){super(`Offset \`${e}\` cannot be negative.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Cursor.NegativeOffsetError"})}}class uc extends L{constructor({length:e,position:n}){super(`Position \`${n}\` is out of bounds (\`0 < position < ${e}\`).`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Cursor.PositionOutOfBoundsError"})}}class fc extends L{constructor({count:e,limit:n}){super(`Recursive read limit of \`${n}\` exceeded (recursive read count: \`${e}\`).`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Cursor.RecursiveReadLimitExceededError"})}}function lc(t,e,n={}){const{as:r="Array",checksumAddress:s=!1}=n,o=typeof e=="string"?gn(e):e,i=ps(o);if(ot(o)===0&&t.length>0)throw new hc;if(ot(o)&&ot(o)<32)throw new dc({data:typeof e=="string"?e:it(e),parameters:t,size:ot(o)});let c=0;const a=r==="Array"?[]:{};for(let u=0;u<t.length;++u){const f=t[u];i.setPosition(c);const[l,d]=Ot(i,f,{checksumAddress:s,staticPosition:0});c+=d,r==="Array"?a.push(l):a[f.name??u]=l}return a}function Be(t,e,n){const{checksumAddress:r=!1}=n??{};if(t.length!==e.length)throw new bs({expectedLength:t.length,givenLength:e.length});const s=tc({checksumAddress:r,parameters:t,values:e}),o=Bn(s);return o.length===0?"0x":o}function Ze(t,e){if(t.length!==e.length)throw new bs({expectedLength:t.length,givenLength:e.length});const n=[];for(let r=0;r<t.length;r++){const s=t[r],o=e[r];n.push(Ze.encode(s,o))}return X(...n)}(function(t){function e(n,r,s=!1){if(n==="address"){const a=r;return re(a),Vt(a.toLowerCase(),s?32:0)}if(n==="string")return on(r);if(n==="bytes")return r;if(n==="bool")return Vt(Pr(r),s?32:1);const o=n.match(hs);if(o){const[a,u,f="256"]=o,l=Number.parseInt(f,10)/8;return Y(r,{size:s?32:l,signed:u==="int"})}const i=n.match(Za);if(i){const[a,u]=i;if(Number.parseInt(u,10)!==(r.length-2)/2)throw new ms({expectedSize:Number.parseInt(u,10),value:r});return Rt(r,s?32:0)}const c=n.match(Va);if(c&&Array.isArray(r)){const[a,u]=c,f=[];for(let l=0;l<r.length;l++)f.push(e(u,r[l],!0));return f.length===0?"0x":X(...f)}throw new In(n)}t.encode=e})(Ze||(Ze={}));function gs(t){return Array.isArray(t)&&typeof t[0]=="string"||typeof t=="string"?Mn(t):t}class dc extends L{constructor({data:e,parameters:n,size:r}){super(`Data size of ${r} bytes is too small for given parameters.`,{metaMessages:[`Params: (${po(n)})`,`Data:   ${e} (${r} bytes)`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiParameters.DataSizeTooSmallError"})}}class hc extends L{constructor(){super('Cannot decode zero data ("0x") with ABI parameters.'),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiParameters.ZeroDataError"})}}class pc extends L{constructor({expectedLength:e,givenLength:n,type:r}){super(`Array length mismatch for type \`${r}\`. Expected: \`${e}\`. Given: \`${n}\`.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiParameters.ArrayLengthMismatchError"})}}class ms extends L{constructor({expectedSize:e,value:n}){super(`Size of bytes "${n}" (bytes${dt(n)}) does not match expected size (bytes${e}).`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiParameters.BytesSizeMismatchError"})}}class bs extends L{constructor({expectedLength:e,givenLength:n}){super(["ABI encoding parameters/values length mismatch.",`Expected length (parameters): ${e}`,`Given length (values): ${n}`].join(`
`)),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiParameters.LengthMismatchError"})}}class gc extends L{constructor(e){super(`Value \`${e}\` is not a valid array.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiParameters.InvalidArrayError"})}}class In extends L{constructor(e){super(`Type \`${e}\` is not a valid ABI Type.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiParameters.InvalidTypeError"})}}function mc(t,e){const{as:n}=e,r=ys(t),s=ps(new Uint8Array(r.length));return r.encode(s),n==="Hex"?it(s.bytes):s.bytes}function bc(t,e={}){const{as:n="Hex"}=e;return mc(t,{as:n})}function ys(t){return Array.isArray(t)?yc(t.map(e=>ys(e))):wc(t)}function yc(t){const e=t.reduce((s,o)=>s+o.length,0),n=ws(e);return{length:(()=>e<=55?1+e:1+n+e)(),encode(s){e<=55?s.pushByte(192+e):(s.pushByte(192+55+n),n===1?s.pushUint8(e):n===2?s.pushUint16(e):n===3?s.pushUint24(e):s.pushUint32(e));for(const{encode:o}of t)o(s)}}}function wc(t){const e=typeof t=="string"?gn(t):t,n=ws(e.length);return{length:(()=>e.length===1&&e[0]<128?1:e.length<=55?1+e.length:1+n+e.length)(),encode(s){e.length===1&&e[0]<128?s.pushBytes(e):e.length<=55?(s.pushByte(128+e.length),s.pushBytes(e)):(s.pushByte(128+55+n),n===1?s.pushUint8(e.length):n===2?s.pushUint16(e.length):n===3?s.pushUint24(e.length):s.pushUint32(e.length),s.pushBytes(e))}}}function ws(t){if(t<2**8)return 1;if(t<2**16)return 2;if(t<2**24)return 3;if(t<2**32)return 4;throw new L("Length is too large.")}class xs extends wn{constructor(e,n){super(),this.finished=!1,this.destroyed=!1,na(e);const r=ve(n);if(this.iHash=e.create(),typeof this.iHash.update!="function")throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const s=this.blockLen,o=new Uint8Array(s);o.set(r.length>s?e.create().update(r).digest():r);for(let i=0;i<o.length;i++)o[i]^=54;this.iHash.update(o),this.oHash=e.create();for(let i=0;i<o.length;i++)o[i]^=106;this.oHash.update(o),Lt(o)}update(e){return zt(this),this.iHash.update(e),this}digestInto(e){zt(this),Bt(e,this.outputLen),this.finished=!0,this.iHash.digestInto(e),this.oHash.update(e),this.oHash.digestInto(e),this.destroy()}digest(){const e=new Uint8Array(this.oHash.outputLen);return this.digestInto(e),e}_cloneInto(e){e||(e=Object.create(Object.getPrototypeOf(this),{}));const{oHash:n,iHash:r,finished:s,destroyed:o,blockLen:i,outputLen:c}=this;return e=e,e.finished=s,e.destroyed=o,e.blockLen=i,e.outputLen=c,e.oHash=n._cloneInto(e.oHash),e.iHash=r._cloneInto(e.iHash),e}clone(){return this._cloneInto()}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}}const vs=(t,e,n)=>new xs(t,e).update(n).digest();vs.create=(t,e)=>new xs(t,e);/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const G=BigInt(0),V=BigInt(1),wt=BigInt(2),xc=BigInt(3),Es=BigInt(4),Bs=BigInt(5),As=BigInt(8);function W(t,e){const n=t%e;return n>=G?n:e+n}function J(t,e,n){let r=t;for(;e-- >G;)r*=r,r%=n;return r}function We(t,e){if(t===G)throw new Error("invert: expected non-zero number");if(e<=G)throw new Error("invert: expected positive modulus, got "+e);let n=W(t,e),r=e,s=G,o=V;for(;n!==G;){const c=r/n,a=r%n,u=s-o*c;r=n,n=a,s=o,o=u}if(r!==V)throw new Error("invert: does not exist");return W(s,e)}function Is(t,e){const n=(t.ORDER+V)/Es,r=t.pow(e,n);if(!t.eql(t.sqr(r),e))throw new Error("Cannot find square root");return r}function vc(t,e){const n=(t.ORDER-Bs)/As,r=t.mul(e,wt),s=t.pow(r,n),o=t.mul(e,s),i=t.mul(t.mul(o,wt),s),c=t.mul(o,t.sub(i,t.ONE));if(!t.eql(t.sqr(c),e))throw new Error("Cannot find square root");return c}function Ec(t){if(t<BigInt(3))throw new Error("sqrt is not defined for small field");let e=t-V,n=0;for(;e%wt===G;)e/=wt,n++;let r=wt;const s=Sn(t);for(;or(s,r)===1;)if(r++>1e3)throw new Error("Cannot find square root: probably non-prime P");if(n===1)return Is;let o=s.pow(r,e);const i=(e+V)/wt;return function(a,u){if(a.is0(u))return u;if(or(a,u)!==1)throw new Error("Cannot find square root");let f=n,l=a.mul(a.ONE,o),d=a.pow(u,e),h=a.pow(u,i);for(;!a.eql(d,a.ONE);){if(a.is0(d))return a.ZERO;let y=1,g=a.sqr(d);for(;!a.eql(g,a.ONE);)if(y++,g=a.sqr(g),y===f)throw new Error("Cannot find square root");const A=V<<BigInt(f-y-1),b=a.pow(l,A);f=y,l=a.sqr(b),d=a.mul(d,l),h=a.mul(h,b)}return h}}function Bc(t){return t%Es===xc?Is:t%As===Bs?vc:Ec(t)}const Ac=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function Ic(t){const e={ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"},n=Ac.reduce((r,s)=>(r[s]="function",r),e);return xe(t,n)}function Sc(t,e,n){if(n<G)throw new Error("invalid exponent, negatives unsupported");if(n===G)return t.ONE;if(n===V)return e;let r=t.ONE,s=e;for(;n>G;)n&V&&(r=t.mul(r,s)),s=t.sqr(s),n>>=V;return r}function Ss(t,e,n=!1){const r=new Array(e.length).fill(n?t.ZERO:void 0),s=e.reduce((i,c,a)=>t.is0(c)?i:(r[a]=i,t.mul(i,c)),t.ONE),o=t.inv(s);return e.reduceRight((i,c,a)=>t.is0(c)?i:(r[a]=t.mul(i,r[a]),t.mul(i,c)),o),r}function or(t,e){const n=(t.ORDER-V)/wt,r=t.pow(e,n),s=t.eql(r,t.ONE),o=t.eql(r,t.ZERO),i=t.eql(r,t.neg(t.ONE));if(!s&&!o&&!i)throw new Error("invalid Legendre symbol result");return s?1:o?0:-1}function Ns(t,e){e!==void 0&&Kt(e);const n=e!==void 0?e:t.toString(2).length,r=Math.ceil(n/8);return{nBitLength:n,nByteLength:r}}function Sn(t,e,n=!1,r={}){if(t<=G)throw new Error("invalid field: expected ORDER > 0, got "+t);const{nBitLength:s,nByteLength:o}=Ns(t,e);if(o>2048)throw new Error("invalid field: expected ORDER of <= 2048 bytes");let i;const c=Object.freeze({ORDER:t,isLE:n,BITS:s,BYTES:o,MASK:we(s),ZERO:G,ONE:V,create:a=>W(a,t),isValid:a=>{if(typeof a!="bigint")throw new Error("invalid field element: expected bigint, got "+typeof a);return G<=a&&a<t},is0:a=>a===G,isOdd:a=>(a&V)===V,neg:a=>W(-a,t),eql:(a,u)=>a===u,sqr:a=>W(a*a,t),add:(a,u)=>W(a+u,t),sub:(a,u)=>W(a-u,t),mul:(a,u)=>W(a*u,t),pow:(a,u)=>Sc(c,a,u),div:(a,u)=>W(a*We(u,t),t),sqrN:a=>a*a,addN:(a,u)=>a+u,subN:(a,u)=>a-u,mulN:(a,u)=>a*u,inv:a=>We(a,t),sqrt:r.sqrt||(a=>(i||(i=Bc(t)),i(c,a))),toBytes:a=>n?Wr(a,o):te(a,o),fromBytes:a=>{if(a.length!==o)throw new Error("Field.fromBytes: expected "+o+" bytes, got "+a.length);return n?Zr(a):xt(a)},invertBatch:a=>Ss(c,a),cmov:(a,u,f)=>f?u:a});return Object.freeze(c)}function Ps(t){if(typeof t!="bigint")throw new Error("field order must be bigint");const e=t.toString(2).length;return Math.ceil(e/8)}function ks(t){const e=Ps(t);return e+Math.ceil(e/2)}function Nc(t,e,n=!1){const r=t.length,s=Ps(e),o=ks(e);if(r<16||r<o||r>1024)throw new Error("expected "+o+"-1024 bytes of input, got "+r);const i=n?Zr(t):xt(t),c=W(i,e-V)+V;return n?Wr(c,s):te(c,s)}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const ir=BigInt(0),Ge=BigInt(1);function Re(t,e){const n=e.negate();return t?n:e}function Cs(t,e){if(!Number.isSafeInteger(t)||t<=0||t>e)throw new Error("invalid window size, expected [1.."+e+"], got W="+t)}function $e(t,e){Cs(t,e);const n=Math.ceil(e/t)+1,r=2**(t-1),s=2**t,o=we(t),i=BigInt(t);return{windows:n,windowSize:r,mask:o,maxNumber:s,shiftBy:i}}function ar(t,e,n){const{windowSize:r,mask:s,maxNumber:o,shiftBy:i}=n;let c=Number(t&s),a=t>>i;c>r&&(c-=o,a+=Ge);const u=e*r,f=u+Math.abs(c)-1,l=c===0,d=c<0,h=e%2!==0;return{nextN:a,offset:f,isZero:l,isNeg:d,isNegF:h,offsetF:u}}function Pc(t,e){if(!Array.isArray(t))throw new Error("array expected");t.forEach((n,r)=>{if(!(n instanceof e))throw new Error("invalid point at index "+r)})}function kc(t,e){if(!Array.isArray(t))throw new Error("array of scalars expected");t.forEach((n,r)=>{if(!e.isValid(n))throw new Error("invalid scalar at index "+r)})}const ze=new WeakMap,Ts=new WeakMap;function Le(t){return Ts.get(t)||1}function Cc(t,e){return{constTimeNegate:Re,hasPrecomputes(n){return Le(n)!==1},unsafeLadder(n,r,s=t.ZERO){let o=n;for(;r>ir;)r&Ge&&(s=s.add(o)),o=o.double(),r>>=Ge;return s},precomputeWindow(n,r){const{windows:s,windowSize:o}=$e(r,e),i=[];let c=n,a=c;for(let u=0;u<s;u++){a=c,i.push(a);for(let f=1;f<o;f++)a=a.add(c),i.push(a);c=a.double()}return i},wNAF(n,r,s){let o=t.ZERO,i=t.BASE;const c=$e(n,e);for(let a=0;a<c.windows;a++){const{nextN:u,offset:f,isZero:l,isNeg:d,isNegF:h,offsetF:y}=ar(s,a,c);s=u,l?i=i.add(Re(h,r[y])):o=o.add(Re(d,r[f]))}return{p:o,f:i}},wNAFUnsafe(n,r,s,o=t.ZERO){const i=$e(n,e);for(let c=0;c<i.windows&&s!==ir;c++){const{nextN:a,offset:u,isZero:f,isNeg:l}=ar(s,c,i);if(s=a,!f){const d=r[u];o=o.add(l?d.negate():d)}}return o},getPrecomputes(n,r,s){let o=ze.get(r);return o||(o=this.precomputeWindow(r,n),n!==1&&ze.set(r,s(o))),o},wNAFCached(n,r,s){const o=Le(n);return this.wNAF(o,this.getPrecomputes(o,n,s),r)},wNAFCachedUnsafe(n,r,s,o){const i=Le(n);return i===1?this.unsafeLadder(n,r,o):this.wNAFUnsafe(i,this.getPrecomputes(i,n,s),r,o)},setWindowSize(n,r){Cs(r,e),Ts.set(n,r),ze.delete(n)}}}function Tc(t,e,n,r){Pc(n,t),kc(r,e);const s=n.length,o=r.length;if(s!==o)throw new Error("arrays of points and scalars must have equal length");const i=t.ZERO,c=ti(BigInt(s));let a=1;c>12?a=c-3:c>4?a=c-2:c>0&&(a=2);const u=we(a),f=new Array(Number(u)+1).fill(i),l=Math.floor((e.BITS-1)/a)*a;let d=i;for(let h=l;h>=0;h-=a){f.fill(i);for(let g=0;g<o;g++){const A=r[g],b=Number(A>>BigInt(h)&u);f[b]=f[b].add(n[g])}let y=i;for(let g=f.length-1,A=i;g>0;g--)A=A.add(f[g]),y=y.add(A);if(d=d.add(y),h!==0)for(let g=0;g<a;g++)d=d.double()}return d}function Os(t){return Ic(t.Fp),xe(t,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze({...Ns(t.n,t.nBitLength),...t,p:t.Fp.ORDER})}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */function cr(t){t.lowS!==void 0&&Gt("lowS",t.lowS),t.prehash!==void 0&&Gt("prehash",t.prehash)}function Oc(t){const e=Os(t);xe(e,{a:"field",b:"field"},{allowInfinityPoint:"boolean",allowedPrivateKeyLengths:"array",clearCofactor:"function",fromBytes:"function",isTorsionFree:"function",toBytes:"function",wrapPrivateKey:"boolean"});const{endo:n,Fp:r,a:s}=e;if(n){if(!r.eql(s,r.ZERO))throw new Error("invalid endo: CURVE.a must be 0");if(typeof n!="object"||typeof n.beta!="bigint"||typeof n.splitScalar!="function")throw new Error('invalid endo: expected "beta": bigint and "splitScalar": function')}return Object.freeze({...e})}class Rc extends Error{constructor(e=""){super(e)}}const ut={Err:Rc,_tlv:{encode:(t,e)=>{const{Err:n}=ut;if(t<0||t>256)throw new n("tlv.encode: wrong tag");if(e.length&1)throw new n("tlv.encode: unpadded data");const r=e.length/2,s=se(r);if(s.length/2&128)throw new n("tlv.encode: long form length too big");const o=r>127?se(s.length/2|128):"";return se(t)+o+s+e},decode(t,e){const{Err:n}=ut;let r=0;if(t<0||t>256)throw new n("tlv.encode: wrong tag");if(e.length<2||e[r++]!==t)throw new n("tlv.decode: wrong tlv");const s=e[r++],o=!!(s&128);let i=0;if(!o)i=s;else{const a=s&127;if(!a)throw new n("tlv.decode(long): indefinite length not supported");if(a>4)throw new n("tlv.decode(long): byte length is too big");const u=e.subarray(r,r+a);if(u.length!==a)throw new n("tlv.decode: length bytes not complete");if(u[0]===0)throw new n("tlv.decode(long): zero leftmost byte");for(const f of u)i=i<<8|f;if(r+=a,i<128)throw new n("tlv.decode(long): not minimal encoding")}const c=e.subarray(r,r+i);if(c.length!==i)throw new n("tlv.decode: wrong value length");return{v:c,l:e.subarray(r+i)}}},_int:{encode(t){const{Err:e}=ut;if(t<ft)throw new e("integer: negative integers are not allowed");let n=se(t);if(Number.parseInt(n[0],16)&8&&(n="00"+n),n.length&1)throw new e("unexpected DER parsing assertion: unpadded hex");return n},decode(t){const{Err:e}=ut;if(t[0]&128)throw new e("invalid signature integer: negative");if(t[0]===0&&!(t[1]&128))throw new e("invalid signature integer: unnecessary leading zero");return xt(t)}},toSig(t){const{Err:e,_int:n,_tlv:r}=ut,s=Q("signature",t),{v:o,l:i}=r.decode(48,s);if(i.length)throw new e("invalid signature: left bytes after parsing");const{v:c,l:a}=r.decode(2,o),{v:u,l:f}=r.decode(2,a);if(f.length)throw new e("invalid signature: left bytes after parsing");return{r:n.decode(c),s:n.decode(u)}},hexFromSig(t){const{_tlv:e,_int:n}=ut,r=e.encode(2,n.encode(t.r)),s=e.encode(2,n.encode(t.s)),o=r+s;return e.encode(48,o)}};function Ue(t,e){return Yt(te(t,e))}const ft=BigInt(0),F=BigInt(1);BigInt(2);const _e=BigInt(3),$c=BigInt(4);function zc(t){const e=Oc(t),{Fp:n}=e,r=Sn(e.n,e.nBitLength),s=e.toBytes||((m,p,w)=>{const I=p.toAffine();return de(Uint8Array.from([4]),n.toBytes(I.x),n.toBytes(I.y))}),o=e.fromBytes||(m=>{const p=m.subarray(1),w=n.fromBytes(p.subarray(0,n.BYTES)),I=n.fromBytes(p.subarray(n.BYTES,2*n.BYTES));return{x:w,y:I}});function i(m){const{a:p,b:w}=e,I=n.sqr(m),v=n.mul(I,m);return n.add(n.add(v,n.mul(m,p)),w)}function c(m,p){const w=n.sqr(p),I=i(m);return n.eql(w,I)}if(!c(e.Gx,e.Gy))throw new Error("bad curve params: generator point");const a=n.mul(n.pow(e.a,_e),$c),u=n.mul(n.sqr(e.b),BigInt(27));if(n.is0(n.add(a,u)))throw new Error("bad curve params: a or b");function f(m){return pn(m,F,e.n)}function l(m){const{allowedPrivateKeyLengths:p,nByteLength:w,wrapPrivateKey:I,n:v}=e;if(p&&typeof m!="bigint"){if(Qt(m)&&(m=Yt(m)),typeof m!="string"||!p.includes(m.length))throw new Error("invalid private key");m=m.padStart(w*2,"0")}let S;try{S=typeof m=="bigint"?m:xt(Q("private key",m,w))}catch{throw new Error("invalid private key, expected hex or "+w+" bytes, got "+typeof m)}return I&&(S=W(S,v)),Tt("private key",S,F,v),S}function d(m){if(!(m instanceof g))throw new Error("ProjectivePoint expected")}const h=Vn((m,p)=>{const{px:w,py:I,pz:v}=m;if(n.eql(v,n.ONE))return{x:w,y:I};const S=m.is0();p==null&&(p=S?n.ONE:n.inv(v));const k=n.mul(w,p),$=n.mul(I,p),P=n.mul(v,p);if(S)return{x:n.ZERO,y:n.ZERO};if(!n.eql(P,n.ONE))throw new Error("invZ was invalid");return{x:k,y:$}}),y=Vn(m=>{if(m.is0()){if(e.allowInfinityPoint&&!n.is0(m.py))return;throw new Error("bad point: ZERO")}const{x:p,y:w}=m.toAffine();if(!n.isValid(p)||!n.isValid(w))throw new Error("bad point: x or y not FE");if(!c(p,w))throw new Error("bad point: equation left != right");if(!m.isTorsionFree())throw new Error("bad point: not in prime-order subgroup");return!0});class g{constructor(p,w,I){if(p==null||!n.isValid(p))throw new Error("x required");if(w==null||!n.isValid(w)||n.is0(w))throw new Error("y required");if(I==null||!n.isValid(I))throw new Error("z required");this.px=p,this.py=w,this.pz=I,Object.freeze(this)}static fromAffine(p){const{x:w,y:I}=p||{};if(!p||!n.isValid(w)||!n.isValid(I))throw new Error("invalid affine point");if(p instanceof g)throw new Error("projective point not allowed");const v=S=>n.eql(S,n.ZERO);return v(w)&&v(I)?g.ZERO:new g(w,I,n.ONE)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static normalizeZ(p){const w=Ss(n,p.map(I=>I.pz));return p.map((I,v)=>I.toAffine(w[v])).map(g.fromAffine)}static fromHex(p){const w=g.fromAffine(o(Q("pointHex",p)));return w.assertValidity(),w}static fromPrivateKey(p){return g.BASE.multiply(l(p))}static msm(p,w){return Tc(g,r,p,w)}_setWindowSize(p){N.setWindowSize(this,p)}assertValidity(){y(this)}hasEvenY(){const{y:p}=this.toAffine();if(n.isOdd)return!n.isOdd(p);throw new Error("Field doesn't support isOdd")}equals(p){d(p);const{px:w,py:I,pz:v}=this,{px:S,py:k,pz:$}=p,P=n.eql(n.mul(w,$),n.mul(S,v)),R=n.eql(n.mul(I,$),n.mul(k,v));return P&&R}negate(){return new g(this.px,n.neg(this.py),this.pz)}double(){const{a:p,b:w}=e,I=n.mul(w,_e),{px:v,py:S,pz:k}=this;let $=n.ZERO,P=n.ZERO,R=n.ZERO,C=n.mul(v,v),H=n.mul(S,S),x=n.mul(k,k),E=n.mul(v,S);return E=n.add(E,E),R=n.mul(v,k),R=n.add(R,R),$=n.mul(p,R),P=n.mul(I,x),P=n.add($,P),$=n.sub(H,P),P=n.add(H,P),P=n.mul($,P),$=n.mul(E,$),R=n.mul(I,R),x=n.mul(p,x),E=n.sub(C,x),E=n.mul(p,E),E=n.add(E,R),R=n.add(C,C),C=n.add(R,C),C=n.add(C,x),C=n.mul(C,E),P=n.add(P,C),x=n.mul(S,k),x=n.add(x,x),C=n.mul(x,E),$=n.sub($,C),R=n.mul(x,H),R=n.add(R,R),R=n.add(R,R),new g($,P,R)}add(p){d(p);const{px:w,py:I,pz:v}=this,{px:S,py:k,pz:$}=p;let P=n.ZERO,R=n.ZERO,C=n.ZERO;const H=e.a,x=n.mul(e.b,_e);let E=n.mul(w,S),O=n.mul(I,k),B=n.mul(v,$),T=n.add(w,I),z=n.add(S,k);T=n.mul(T,z),z=n.add(E,O),T=n.sub(T,z),z=n.add(w,v);let _=n.add(S,$);return z=n.mul(z,_),_=n.add(E,B),z=n.sub(z,_),_=n.add(I,v),P=n.add(k,$),_=n.mul(_,P),P=n.add(O,B),_=n.sub(_,P),C=n.mul(H,z),P=n.mul(x,B),C=n.add(P,C),P=n.sub(O,C),C=n.add(O,C),R=n.mul(P,C),O=n.add(E,E),O=n.add(O,E),B=n.mul(H,B),z=n.mul(x,z),O=n.add(O,B),B=n.sub(E,B),B=n.mul(H,B),z=n.add(z,B),E=n.mul(O,z),R=n.add(R,E),E=n.mul(_,z),P=n.mul(T,P),P=n.sub(P,E),E=n.mul(T,O),C=n.mul(_,C),C=n.add(C,E),new g(P,R,C)}subtract(p){return this.add(p.negate())}is0(){return this.equals(g.ZERO)}wNAF(p){return N.wNAFCached(this,p,g.normalizeZ)}multiplyUnsafe(p){const{endo:w,n:I}=e;Tt("scalar",p,ft,I);const v=g.ZERO;if(p===ft)return v;if(this.is0()||p===F)return this;if(!w||N.hasPrecomputes(this))return N.wNAFCachedUnsafe(this,p,g.normalizeZ);let{k1neg:S,k1:k,k2neg:$,k2:P}=w.splitScalar(p),R=v,C=v,H=this;for(;k>ft||P>ft;)k&F&&(R=R.add(H)),P&F&&(C=C.add(H)),H=H.double(),k>>=F,P>>=F;return S&&(R=R.negate()),$&&(C=C.negate()),C=new g(n.mul(C.px,w.beta),C.py,C.pz),R.add(C)}multiply(p){const{endo:w,n:I}=e;Tt("scalar",p,F,I);let v,S;if(w){const{k1neg:k,k1:$,k2neg:P,k2:R}=w.splitScalar(p);let{p:C,f:H}=this.wNAF($),{p:x,f:E}=this.wNAF(R);C=N.constTimeNegate(k,C),x=N.constTimeNegate(P,x),x=new g(n.mul(x.px,w.beta),x.py,x.pz),v=C.add(x),S=H.add(E)}else{const{p:k,f:$}=this.wNAF(p);v=k,S=$}return g.normalizeZ([v,S])[0]}multiplyAndAddUnsafe(p,w,I){const v=g.BASE,S=($,P)=>P===ft||P===F||!$.equals(v)?$.multiplyUnsafe(P):$.multiply(P),k=S(this,w).add(S(p,I));return k.is0()?void 0:k}toAffine(p){return h(this,p)}isTorsionFree(){const{h:p,isTorsionFree:w}=e;if(p===F)return!0;if(w)return w(g,this);throw new Error("isTorsionFree() has not been declared for the elliptic curve")}clearCofactor(){const{h:p,clearCofactor:w}=e;return p===F?this:w?w(g,this):this.multiplyUnsafe(e.h)}toRawBytes(p=!0){return Gt("isCompressed",p),this.assertValidity(),s(g,this,p)}toHex(p=!0){return Gt("isCompressed",p),Yt(this.toRawBytes(p))}}g.BASE=new g(e.Gx,e.Gy,n.ONE),g.ZERO=new g(n.ZERO,n.ONE,n.ZERO);const{endo:A,nBitLength:b}=e,N=Cc(g,A?Math.ceil(b/2):b);return{CURVE:e,ProjectivePoint:g,normPrivateKeyToScalar:l,weierstrassEquation:i,isWithinCurveOrder:f}}function Lc(t){const e=Os(t);return xe(e,{hash:"hash",hmac:"function",randomBytes:"function"},{bits2int:"function",bits2int_modN:"function",lowS:"boolean"}),Object.freeze({lowS:!0,...e})}function Uc(t){const e=Lc(t),{Fp:n,n:r,nByteLength:s,nBitLength:o}=e,i=n.BYTES+1,c=2*n.BYTES+1;function a(x){return W(x,r)}function u(x){return We(x,r)}const{ProjectivePoint:f,normPrivateKeyToScalar:l,weierstrassEquation:d,isWithinCurveOrder:h}=zc({...e,toBytes(x,E,O){const B=E.toAffine(),T=n.toBytes(B.x),z=de;return Gt("isCompressed",O),O?z(Uint8Array.from([E.hasEvenY()?2:3]),T):z(Uint8Array.from([4]),T,n.toBytes(B.y))},fromBytes(x){const E=x.length,O=x[0],B=x.subarray(1);if(E===i&&(O===2||O===3)){const T=xt(B);if(!pn(T,F,n.ORDER))throw new Error("Point is not on curve");const z=d(T);let _;try{_=n.sqrt(z)}catch(Z){const D=Z instanceof Error?": "+Z.message:"";throw new Error("Point is not on curve"+D)}const M=(_&F)===F;return(O&1)===1!==M&&(_=n.neg(_)),{x:T,y:_}}else if(E===c&&O===4){const T=n.fromBytes(B.subarray(0,n.BYTES)),z=n.fromBytes(B.subarray(n.BYTES,2*n.BYTES));return{x:T,y:z}}else{const T=i,z=c;throw new Error("invalid Point, expected length of "+T+", or uncompressed "+z+", got "+E)}}});function y(x){const E=r>>F;return x>E}function g(x){return y(x)?a(-x):x}const A=(x,E,O)=>xt(x.slice(E,O));class b{constructor(E,O,B){Tt("r",E,F,r),Tt("s",O,F,r),this.r=E,this.s=O,B!=null&&(this.recovery=B),Object.freeze(this)}static fromCompact(E){const O=s;return E=Q("compactSignature",E,O*2),new b(A(E,0,O),A(E,O,2*O))}static fromDER(E){const{r:O,s:B}=ut.toSig(Q("DER",E));return new b(O,B)}assertValidity(){}addRecoveryBit(E){return new b(this.r,this.s,E)}recoverPublicKey(E){const{r:O,s:B,recovery:T}=this,z=v(Q("msgHash",E));if(T==null||![0,1,2,3].includes(T))throw new Error("recovery id invalid");const _=T===2||T===3?O+e.n:O;if(_>=n.ORDER)throw new Error("recovery id 2 or 3 invalid");const M=T&1?"03":"02",tt=f.fromHex(M+Ue(_,n.BYTES)),Z=u(_),D=a(-z*Z),It=a(B*Z),ht=f.BASE.multiplyAndAddUnsafe(tt,D,It);if(!ht)throw new Error("point at infinify");return ht.assertValidity(),ht}hasHighS(){return y(this.s)}normalizeS(){return this.hasHighS()?new b(this.r,a(-this.s),this.recovery):this}toDERRawBytes(){return le(this.toDERHex())}toDERHex(){return ut.hexFromSig(this)}toCompactRawBytes(){return le(this.toCompactHex())}toCompactHex(){const E=s;return Ue(this.r,E)+Ue(this.s,E)}}const N={isValidPrivateKey(x){try{return l(x),!0}catch{return!1}},normPrivateKeyToScalar:l,randomPrivateKey:()=>{const x=ks(e.n);return Nc(e.randomBytes(x),e.n)},precompute(x=8,E=f.BASE){return E._setWindowSize(x),E.multiply(BigInt(3)),E}};function m(x,E=!0){return f.fromPrivateKey(x).toRawBytes(E)}function p(x){if(typeof x=="bigint")return!1;if(x instanceof f)return!0;const O=Q("key",x).length,B=n.BYTES,T=B+1,z=2*B+1;if(!(e.allowedPrivateKeyLengths||s===T))return O===T||O===z}function w(x,E,O=!0){if(p(x)===!0)throw new Error("first arg must be private key");if(p(E)===!1)throw new Error("second arg must be public key");return f.fromHex(E).multiply(l(x)).toRawBytes(O)}const I=e.bits2int||function(x){if(x.length>8192)throw new Error("input is too large");const E=xt(x),O=x.length*8-o;return O>0?E>>BigInt(O):E},v=e.bits2int_modN||function(x){return a(I(x))},S=we(o);function k(x){return Tt("num < 2^"+o,x,ft,S),te(x,s)}function $(x,E,O=P){if(["recovered","canonical"].some(bt=>bt in O))throw new Error("sign() legacy options not supported");const{hash:B,randomBytes:T}=e;let{lowS:z,prehash:_,extraEntropy:M}=O;z==null&&(z=!0),x=Q("msgHash",x),cr(O),_&&(x=Q("prehashed msgHash",B(x)));const tt=v(x),Z=l(E),D=[k(Z),k(tt)];if(M!=null&&M!==!1){const bt=M===!0?T(n.BYTES):M;D.push(Q("extraEntropy",bt))}const It=de(...D),ht=tt;function Se(bt){const St=I(bt);if(!h(St))return;const Ne=u(St),_t=f.BASE.multiply(St).toAffine(),yt=a(_t.x);if(yt===ft)return;const qt=a(Ne*a(ht+yt*Z));if(qt===ft)return;let Ht=(_t.x===yt?0:2)|Number(_t.y&F),Nt=qt;return z&&y(qt)&&(Nt=g(qt),Ht^=1),new b(yt,Nt,Ht)}return{seed:It,k2sig:Se}}const P={lowS:e.lowS,prehash:!1},R={lowS:e.lowS,prehash:!1};function C(x,E,O=P){const{seed:B,k2sig:T}=$(x,E,O),z=e;return ei(z.hash.outputLen,z.nByteLength,z.hmac)(B,T)}f.BASE._setWindowSize(8);function H(x,E,O,B=R){var Ht;const T=x;E=Q("msgHash",E),O=Q("publicKey",O);const{lowS:z,prehash:_,format:M}=B;if(cr(B),"strict"in B)throw new Error("options.strict was renamed to lowS");if(M!==void 0&&M!=="compact"&&M!=="der")throw new Error("format must be compact or der");const tt=typeof T=="string"||Qt(T),Z=!tt&&!M&&typeof T=="object"&&T!==null&&typeof T.r=="bigint"&&typeof T.s=="bigint";if(!tt&&!Z)throw new Error("invalid signature, expected Uint8Array, hex string or Signature instance");let D,It;try{if(Z&&(D=new b(T.r,T.s)),tt){try{M!=="compact"&&(D=b.fromDER(T))}catch(Nt){if(!(Nt instanceof ut.Err))throw Nt}!D&&M!=="der"&&(D=b.fromCompact(T))}It=f.fromHex(O)}catch{return!1}if(!D||z&&D.hasHighS())return!1;_&&(E=e.hash(E));const{r:ht,s:Se}=D,bt=v(E),St=u(Se),Ne=a(bt*St),_t=a(ht*St),yt=(Ht=f.BASE.multiplyAndAddUnsafe(It,Ne,_t))==null?void 0:Ht.toAffine();return yt?a(yt.x)===ht:!1}return{CURVE:e,getPublicKey:m,getSharedSecret:w,sign:C,verify:H,ProjectivePoint:f,Signature:b,utils:N}}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */function _c(t){return{hash:t,hmac:(e,...n)=>vs(t,e,ca(...n)),randomBytes:ua}}function qc(t,e){const n=r=>Uc({...t,..._c(r)});return{...n(e),create:n}}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Rs=BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),ur=BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),Hc=BigInt(0),Fc=BigInt(1),Ye=BigInt(2),fr=(t,e)=>(t+e/Ye)/e;function Mc(t){const e=Rs,n=BigInt(3),r=BigInt(6),s=BigInt(11),o=BigInt(22),i=BigInt(23),c=BigInt(44),a=BigInt(88),u=t*t*t%e,f=u*u*t%e,l=J(f,n,e)*f%e,d=J(l,n,e)*f%e,h=J(d,Ye,e)*u%e,y=J(h,s,e)*h%e,g=J(y,o,e)*y%e,A=J(g,c,e)*g%e,b=J(A,a,e)*A%e,N=J(b,c,e)*g%e,m=J(N,n,e)*f%e,p=J(m,i,e)*y%e,w=J(p,r,e)*u%e,I=J(w,Ye,e);if(!Ke.eql(Ke.sqr(I),t))throw new Error("Cannot find square root");return I}const Ke=Sn(Rs,void 0,void 0,{sqrt:Mc}),jc=qc({a:Hc,b:BigInt(7),Fp:Ke,n:ur,Gx:BigInt("55066263022277343669578718895168534326250603453777594175500187360389116729240"),Gy:BigInt("32670510020758816978083085130507043184471273380659243275938904335757337482424"),h:BigInt(1),lowS:!0,endo:{beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),splitScalar:t=>{const e=ur,n=BigInt("0x3086d221a7d46bcde86c90e49284eb15"),r=-Fc*BigInt("0xe4437ed6010e88286f547fa90abfe4c3"),s=BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),o=n,i=BigInt("0x100000000000000000000000000000000"),c=fr(o*t,e),a=fr(-r*t,e);let u=W(t-c*n-a*s,e),f=W(-c*r-a*o,e);const l=u>i,d=f>i;if(l&&(u=e-u),d&&(f=e-f),u>i||f>i)throw new Error("splitScalar: Endomorphism failed, k="+t);return{k1neg:l,k1:u,k2neg:d,k2:f}}}},Oa);function $s(t,e={}){const{recovered:n}=e;if(typeof t.r>"u")throw new qe({signature:t});if(typeof t.s>"u")throw new qe({signature:t});if(n&&typeof t.yParity>"u")throw new qe({signature:t});if(t.r<0n||t.r>nr)throw new Yc({value:t.r});if(t.s<0n||t.s>nr)throw new Kc({value:t.s});if(typeof t.yParity=="number"&&t.yParity!==0&&t.yParity!==1)throw new Pn({value:t.yParity})}function Dc(t){return zs(it(t))}function zs(t){if(t.length!==130&&t.length!==132)throw new Gc({signature:t});const e=BigInt(j(t,0,32)),n=BigInt(j(t,32,64)),r=(()=>{const s=+`0x${t.slice(130)}`;if(!Number.isNaN(s))try{return Nn(s)}catch{throw new Pn({value:s})}})();return typeof r>"u"?{r:e,s:n}:{r:e,s:n,yParity:r}}function Ls(t){if(!(typeof t.r>"u")&&!(typeof t.s>"u"))return Us(t)}function Us(t){const e=(()=>typeof t=="string"?zs(t):t instanceof Uint8Array?Dc(t):typeof t.r=="string"?Zc(t):t.v?Vc(t):{r:t.r,s:t.s,...typeof t.yParity<"u"?{yParity:t.yParity}:{}})();return $s(e),e}function Vc(t){return{r:t.r,s:t.s,yParity:Nn(t.v)}}function Zc(t){const e=(()=>{const n=t.v?Number(t.v):void 0;let r=t.yParity?Number(t.yParity):void 0;if(typeof n=="number"&&typeof r!="number"&&(r=Nn(n)),typeof r!="number")throw new Pn({value:t.yParity});return r})();return{r:BigInt(t.r),s:BigInt(t.s),yParity:e}}function Wc(t){const{r:e,s:n,yParity:r}=t;return[r?"0x01":"0x",e===0n?"0x":_n(Y(e)),n===0n?"0x":_n(Y(n))]}function Nn(t){if(t===0||t===27)return 0;if(t===1||t===28)return 1;if(t>=35)return t%2===0?1:0;throw new Xc({value:t})}class Gc extends L{constructor({signature:e}){super(`Value \`${e}\` is an invalid signature size.`,{metaMessages:["Expected: 64 bytes or 65 bytes.",`Received ${dt(sn(e))} bytes.`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Signature.InvalidSerializedSizeError"})}}class qe extends L{constructor({signature:e}){super(`Signature \`${tn(e)}\` is missing either an \`r\`, \`s\`, or \`yParity\` property.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Signature.MissingPropertiesError"})}}class Yc extends L{constructor({value:e}){super(`Value \`${e}\` is an invalid r value. r must be a positive integer less than 2^256.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Signature.InvalidRError"})}}class Kc extends L{constructor({value:e}){super(`Value \`${e}\` is an invalid s value. s must be a positive integer less than 2^256.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Signature.InvalidSError"})}}class Pn extends L{constructor({value:e}){super(`Value \`${e}\` is an invalid y-parity value. Y-parity must be 0 or 1.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Signature.InvalidYParityError"})}}class Xc extends L{constructor({value:e}){super(`Value \`${e}\` is an invalid v value. v must be 27, 28 or >=35.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Signature.InvalidVError"})}}function Jc(t,e={}){return typeof t.chainId=="string"?Qc(t):{...t,...e.signature}}function Qc(t){const{address:e,chainId:n,nonce:r}=t,s=Ls(t);return{address:e,chainId:Number(n),nonce:BigInt(r),...s}}function tu(t){return eu(t,{presign:!0})}function eu(t,e={}){const{presign:n}=e;return Ee(X("0x05",bc(nu(n?{address:t.address,chainId:t.chainId,nonce:t.nonce}:t))))}function nu(t){const{address:e,chainId:n,nonce:r}=t,s=Ls(t);return[n?Y(n):"0x",e,r?Y(r):"0x",...s?Wc(s):[]]}function ru(t){return Ma(su(t))}function su(t){const{payload:e,signature:n}=t,{r,s,yParity:o}=n,c=new jc.Signature(BigInt(r),BigInt(s)).addRecoveryBit(o).recoverPublicKey(sn(e).substring(2));return Ra(c)}const _s="0x8010801080108010801080108010801080108010801080108010801080108010",qs=gs("(uint256 chainId, address delegation, uint256 nonce, uint8 yParity, uint256 r, uint256 s), address to, bytes data");function kn(t){if(typeof t=="string"){if(j(t,-32)!==_s)throw new au(t)}else $s(t.authorization)}function ou(t){kn(t);const e=mr(j(t,-64,-32)),n=j(t,-e-64,-64),r=j(t,0,-e-64),[s,o,i]=lc(qs,n);return{authorization:Jc({address:s.delegation,chainId:Number(s.chainId),nonce:s.nonce,yParity:s.yParity,r:s.r,s:s.s}),signature:r,...i&&i!=="0x"?{data:i,to:o}:{}}}function rf(t){const{data:e,signature:n}=t;kn(t);const r=ru({payload:tu(t.authorization),signature:Us(t.authorization)}),s=Be(qs,[{...t.authorization,delegation:t.authorization.address,chainId:BigInt(t.authorization.chainId)},t.to??r,e??"0x"]),o=Y(dt(s),{size:32});return X(n,s,o,_s)}function iu(t){try{return kn(t),!0}catch{return!1}}let au=class extends L{constructor(e){super(`Value \`${e}\` is an invalid ERC-8010 wrapped signature.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"SignatureErc8010.InvalidWrappedSignatureError"})}};function of(t){const{address:e,data:n,signature:r,to:s="hex"}=t,o=ge([Er([{type:"address"},{type:"bytes"},{type:"bytes"}],[e,n,r]),Ji]);return s==="hex"?o:kr(o)}function cu(t){return t.map(e=>({...e,value:BigInt(e.value)}))}function uu(t){return{...t,balance:t.balance?BigInt(t.balance):void 0,nonce:t.nonce?fe(t.nonce):void 0,storageProof:t.storageProof?cu(t.storageProof):void 0}}async function fu(t,{address:e,blockNumber:n,blockTag:r,storageKeys:s}){const o=r??"latest",i=n!==void 0?q(n):void 0,c=await t.request({method:"eth_getProof",params:[e,s,i||o]});return uu(c)}async function lu(t,{address:e,blockNumber:n,blockTag:r="latest",slot:s}){const o=n!==void 0?q(n):void 0;return await t.request({method:"eth_getStorageAt",params:[e,s,o||r]})}async function du(t,{hash:e,transactionReceipt:n}){const[r,s]=await Promise.all([U(t,be,"getBlockNumber")({}),e?U(t,Cr,"getTransaction")({hash:e}):void 0]),o=(n==null?void 0:n.blockNumber)||(s==null?void 0:s.blockNumber);return o?r-o+1n:0n}async function hu(t,e){var N;const{account:n,authorizationList:r,allowFailure:s=!0,blockNumber:o,blockOverrides:i,blockTag:c,stateOverride:a}=e,u=e.contracts,{batchSize:f=e.batchSize??1024,deployless:l=e.deployless??!1}=typeof((N=t.batch)==null?void 0:N.multicall)=="object"?t.batch.multicall:{},d=(()=>{if(e.multicallAddress)return e.multicallAddress;if(l)return null;if(t.chain)return Jt({blockNumber:o,chain:t.chain,contract:"multicall3"});throw new Error("client chain not configured. multicallAddress is required.")})(),h=[[]];let y=0,g=0;for(let m=0;m<u.length;m++){const{abi:p,address:w,args:I,functionName:v}=u[m];try{const S=nt({abi:p,args:I,functionName:v});g+=(S.length-2)/2,f>0&&g>f&&h[y].length>0&&(y++,g=(S.length-2)/2,h[y]=[]),h[y]=[...h[y],{allowFailure:!0,callData:S,target:w}]}catch(S){const k=$t(S,{abi:p,address:w,args:I,docsPath:"/docs/contract/multicall",functionName:v,sender:n});if(!s)throw k;h[y]=[...h[y],{allowFailure:!0,callData:"0x",target:w}]}}const A=await Promise.allSettled(h.map(m=>U(t,et,"readContract")({...d===null?{code:Tr}:{address:d},abi:Or,account:n,args:[m],authorizationList:r,blockNumber:o,blockOverrides:i,blockTag:c,functionName:"aggregate3",stateOverride:a}))),b=[];for(let m=0;m<A.length;m++){const p=A[m];if(p.status==="rejected"){if(!s)throw p.reason;for(let I=0;I<h[m].length;I++)b.push({status:"failure",error:p.reason,result:void 0});continue}const w=p.value;for(let I=0;I<w.length;I++){const{returnData:v,success:S}=w[I],{callData:k}=h[m][I],{abi:$,address:P,functionName:R,args:C}=u[b.length];try{if(k==="0x")throw new Rr;if(!S)throw new $r({data:v});const H=Ut({abi:$,args:C,data:v,functionName:R});b.push(s?{result:H,status:"success"}:H)}catch(H){const x=$t(H,{abi:$,address:P,args:C,docsPath:"/docs/contract/multicall",functionName:R});if(!s)throw x;b.push({error:x,result:void 0,status:"failure"})}}}if(b.length!==u.length)throw new K("multicall results mismatch");return b}async function Xe(t,e){const{blockNumber:n,blockTag:r=t.experimental_blockTag??"latest",blocks:s,returnFullTransactions:o,traceTransfers:i,validation:c}=e;try{const a=[];for(const d of s){const h=d.blockOverrides?go(d.blockOverrides):void 0,y=d.calls.map(A=>{const b=A,N=b.account?mt(b.account):void 0,m=b.abi?nt(b):b.data,p={...b,account:N,data:b.dataSuffix?ue([m||"0x",b.dataSuffix]):m,from:b.from??(N==null?void 0:N.address)};return wr(p),xr(p)}),g=d.stateOverrides?mo(d.stateOverrides):void 0;a.push({blockOverrides:h,calls:y,stateOverrides:g})}const f=(typeof n=="bigint"?q(n):void 0)||r;return(await t.request({method:"eth_simulateV1",params:[{blockStateCalls:a,returnFullTransactions:o,traceTransfers:i,validation:c},f]})).map((d,h)=>({...bo(d),calls:d.calls.map((y,g)=>{var $,P;const{abi:A,args:b,functionName:N,to:m}=s[h].calls[g],p=(($=y.error)==null?void 0:$.data)??y.returnData,w=BigInt(y.gasUsed),I=(P=y.logs)==null?void 0:P.map(R=>vt(R)),v=y.status==="0x1"?"success":"failure",S=A&&v==="success"&&p!=="0x"?Ut({abi:A,data:p,functionName:N}):null,k=(()=>{var C;if(v==="success")return;let R;if(((C=y.error)==null?void 0:C.data)==="0x"?R=new Rr:y.error&&(R=new $r(y.error)),!!R)return $t(R,{abi:A??[],address:m??"0x",args:b,functionName:N??"<unknown>"})})();return{data:p,gasUsed:w,logs:I,status:v,...v==="success"?{result:S}:{error:k}}})}))}catch(a){const u=a,f=yo(u,{});throw f instanceof wo?u:f}}function Je(t){let e=!0,n="",r=0,s="",o=!1;for(let i=0;i<t.length;i++){const c=t[i];if(["(",")",","].includes(c)&&(e=!0),c==="("&&r++,c===")"&&r--,!!e){if(r===0){if(c===" "&&["event","function","error",""].includes(s))s="";else if(s+=c,c===")"){o=!0;break}continue}if(c===" "){t[i-1]!==","&&n!==","&&n!==",("&&(n="",e=!1);continue}s+=c,n+=c}}if(!o)throw new L("Unable to normalize signature.");return s}function Qe(t,e){const n=typeof t,r=e.type;switch(r){case"address":return De(t,{strict:!1});case"bool":return n==="boolean";case"function":return n==="string";case"string":return n==="string";default:return r==="tuple"&&"components"in e?Object.values(e.components).every((s,o)=>Qe(Object.values(t)[o],s)):/^u?int(8|16|24|32|40|48|56|64|72|80|88|96|104|112|120|128|136|144|152|160|168|176|184|192|200|208|216|224|232|240|248|256)?$/.test(r)?n==="number"||n==="bigint":/^bytes([1-9]|1[0-9]|2[0-9]|3[0-2])?$/.test(r)?n==="string"||t instanceof Uint8Array:/[a-z]+[1-9]{0,3}(\[[0-9]{0,}\])+$/.test(r)?Array.isArray(t)&&t.every(s=>Qe(s,{...e,type:r.replace(/(\[[0-9]{0,}\])$/,"")})):!1}}function Hs(t,e,n){for(const r in t){const s=t[r],o=e[r];if(s.type==="tuple"&&o.type==="tuple"&&"components"in s&&"components"in o)return Hs(s.components,o.components,n[r]);const i=[s.type,o.type];if((()=>i.includes("address")&&i.includes("bytes20")?!0:i.includes("address")&&i.includes("string")?De(n[r],{strict:!1}):i.includes("address")&&i.includes("bytes")?De(n[r],{strict:!1}):!1)())return i}}function Fs(t,e={}){const{prepare:n=!0}=e,r=(()=>Array.isArray(t)||typeof t=="string"?Fn(t):t)();return{...r,...n?{hash:Ct(r)}:{}}}function Ae(t,e,n){const{args:r=[],prepare:s=!0}=n??{},o=Nr(e,{strict:!1}),i=t.filter(u=>o?u.type==="function"||u.type==="error"?Ms(u)===j(e,0,4):u.type==="event"?Ct(u)===e:!1:"name"in u&&u.name===e);if(i.length===0)throw new he({name:e});if(i.length===1)return{...i[0],...s?{hash:Ct(i[0])}:{}};let c;for(const u of i){if(!("inputs"in u))continue;if(!r||r.length===0){if(!u.inputs||u.inputs.length===0)return{...u,...s?{hash:Ct(u)}:{}};continue}if(!u.inputs||u.inputs.length===0||u.inputs.length!==r.length)continue;if(r.every((l,d)=>{const h="inputs"in u&&u.inputs[d];return h?Qe(l,h):!1})){if(c&&"inputs"in c&&c.inputs){const l=Hs(u.inputs,c.inputs,r);if(l)throw new gu({abiItem:u,type:l[0]},{abiItem:c,type:l[1]})}c=u}}const a=(()=>{if(c)return c;const[u,...f]=i;return{...u,overloads:f}})();if(!a)throw new he({name:e});return{...a,...s?{hash:Ct(a)}:{}}}function Ms(...t){const e=(()=>{if(Array.isArray(t[0])){const[n,r]=t;return Ae(n,r)}return t[0]})();return j(Ct(e),0,4)}function pu(...t){const e=(()=>{if(Array.isArray(t[0])){const[r,s]=t;return Ae(r,s)}return t[0]})(),n=(()=>typeof e=="string"?e:He(e))();return Je(n)}function Ct(...t){const e=(()=>{if(Array.isArray(t[0])){const[n,r]=t;return Ae(n,r)}return t[0]})();return typeof e!="string"&&"hash"in e&&e.hash?e.hash:Ee(on(pu(e)))}class gu extends L{constructor(e,n){super("Found ambiguous types in overloaded ABI Items.",{metaMessages:[`\`${e.type}\` in \`${Je(He(e.abiItem))}\`, and`,`\`${n.type}\` in \`${Je(He(n.abiItem))}\``,"","These types encode differently and cannot be distinguished at runtime.","Remove one of the ambiguous items in the ABI."]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiItem.AmbiguityError"})}}class he extends L{constructor({name:e,data:n,type:r="item"}){const s=(()=>e?` with name "${e}"`:n?` with data "${n}"`:"")();super(`ABI ${r}${s} not found.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiItem.NotFoundError"})}}function mu(...t){var o;const[e,n]=(()=>{if(Array.isArray(t[0])){const[i,c]=t;return[yu(i),c]}return t})(),{bytecode:r,args:s}=n;return X(r,(o=e.inputs)!=null&&o.length&&(s!=null&&s.length)?Be(e.inputs,s):"0x")}function bu(t){return Fs(t)}function yu(t){const e=t.find(n=>n.type==="constructor");if(!e)throw new he({name:"constructor"});return e}function wu(...t){const[e,n=[]]=(()=>{if(Array.isArray(t[0])){const[u,f,l]=t;return[lr(u,f,{args:l}),l]}const[c,a]=t;return[c,a]})(),{overloads:r}=e,s=r?lr([e,...r],e.name,{args:n}):e,o=xu(s),i=n.length>0?Be(s.inputs,n):void 0;return i?X(o,i):o}function kt(t,e={}){return Fs(t,e)}function lr(t,e,n){const r=Ae(t,e,n);if(r.type!=="function")throw new he({name:e,type:"function"});return r}function xu(t){return Ms(t)}const vu="0xeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeee",st="0x0000000000000000000000000000000000000000",Eu="0x6080604052348015600e575f80fd5b5061016d8061001c5f395ff3fe608060405234801561000f575f80fd5b5060043610610029575f3560e01c8063f8b2cb4f1461002d575b5f80fd5b610047600480360381019061004291906100db565b61005d565b604051610054919061011e565b60405180910390f35b5f8173ffffffffffffffffffffffffffffffffffffffff16319050919050565b5f80fd5b5f73ffffffffffffffffffffffffffffffffffffffff82169050919050565b5f6100aa82610081565b9050919050565b6100ba816100a0565b81146100c4575f80fd5b50565b5f813590506100d5816100b1565b92915050565b5f602082840312156100f0576100ef61007d565b5b5f6100fd848285016100c7565b91505092915050565b5f819050919050565b61011881610106565b82525050565b5f6020820190506101315f83018461010f565b9291505056fea26469706673582212203b9fe929fe995c7cf9887f0bdba8a36dd78e8b73f149b17d2d9ad7cd09d2dc6264736f6c634300081a0033";async function Bu(t,e){const{blockNumber:n,blockTag:r,calls:s,stateOverrides:o,traceAssetChanges:i,traceTransfers:c,validation:a}=e,u=e.account?mt(e.account):void 0;if(i&&!u)throw new K("`account` is required when `traceAssetChanges` is true");const f=u?mu(bu("constructor(bytes, bytes)"),{bytecode:xo,args:[Eu,wu(kt("function getBalance(address)"),[u.address])]}):void 0,l=i?await Promise.all(e.calls.map(async B=>{if(!B.data&&!B.abi)return;const{accessList:T}=await ts(t,{account:u.address,...B,data:B.abi?nt(B):B.data});return T.map(({address:z,storageKeys:_})=>_.length>0?z:null)})).then(B=>B.flat().filter(Boolean)):[],d=await Xe(t,{blockNumber:n,blockTag:r,blocks:[...i?[{calls:[{data:f}],stateOverrides:o},{calls:l.map((B,T)=>({abi:[kt("function balanceOf(address) returns (uint256)")],functionName:"balanceOf",args:[u.address],to:B,from:st,nonce:T})),stateOverrides:[{address:st,nonce:0}]}]:[],{calls:[...s,{}].map(B=>({...B,from:u==null?void 0:u.address})),stateOverrides:o},...i?[{calls:[{data:f}]},{calls:l.map((B,T)=>({abi:[kt("function balanceOf(address) returns (uint256)")],functionName:"balanceOf",args:[u.address],to:B,from:st,nonce:T})),stateOverrides:[{address:st,nonce:0}]},{calls:l.map((B,T)=>({to:B,abi:[kt("function decimals() returns (uint256)")],functionName:"decimals",from:st,nonce:T})),stateOverrides:[{address:st,nonce:0}]},{calls:l.map((B,T)=>({to:B,abi:[kt("function tokenURI(uint256) returns (string)")],functionName:"tokenURI",args:[0n],from:st,nonce:T})),stateOverrides:[{address:st,nonce:0}]},{calls:l.map((B,T)=>({to:B,abi:[kt("function symbol() returns (string)")],functionName:"symbol",from:st,nonce:T})),stateOverrides:[{address:st,nonce:0}]}]:[]],traceTransfers:c,validation:a}),h=i?d[2]:d[0],[y,g,,A,b,N,m,p]=i?d:[],{calls:w,...I}=h,v=w.slice(0,-1)??[],S=(y==null?void 0:y.calls)??[],k=(g==null?void 0:g.calls)??[],$=[...S,...k].map(B=>B.status==="success"?Et(B.data):null),P=(A==null?void 0:A.calls)??[],R=(b==null?void 0:b.calls)??[],C=[...P,...R].map(B=>B.status==="success"?Et(B.data):null),H=((N==null?void 0:N.calls)??[]).map(B=>B.status==="success"?B.result:null),x=((p==null?void 0:p.calls)??[]).map(B=>B.status==="success"?B.result:null),E=((m==null?void 0:m.calls)??[]).map(B=>B.status==="success"?B.result:null),O=[];for(const[B,T]of C.entries()){const z=$[B];if(typeof T!="bigint"||typeof z!="bigint")continue;const _=H[B-1],M=x[B-1],tt=E[B-1],Z=(()=>B===0?{address:vu,decimals:18,symbol:"ETH"}:{address:l[B-1],decimals:tt||_?Number(_??1):void 0,symbol:M??void 0})();O.some(D=>D.token.address===Z.address)||O.push({token:Z,value:{pre:z,post:T,diff:T-z}})}return{assetChanges:O,block:I,results:v}}async function Au(t,e){const{abi:n,address:r,args:s,dataSuffix:o,functionName:i,...c}=e,a=c.account?mt(c.account):t.account,u=nt({abi:n,args:s,functionName:i});try{const{data:f}=await U(t,pe,"call")({batch:!1,data:`${u}${o?o.replace("0x",""):""}`,to:r,...c,account:a}),l=Ut({abi:n,args:s,functionName:i,data:f||"0x"}),d=n.filter(h=>"name"in h&&h.name===e.functionName);return{result:l,request:{abi:d,address:r,args:s,dataSuffix:o,functionName:i,...c,account:a}}}catch(f){throw $t(f,{abi:n,address:r,args:s,docsPath:"/docs/contract/simulateContract",functionName:i,sender:a==null?void 0:a.address})}}const js="0x6492649264926492649264926492649264926492649264926492649264926492";function Iu(t){if(j(t,-32)!==js)throw new Pu(t)}function Su(t){const{data:e,signature:n,to:r}=t;return X(Be(gs("address, bytes, bytes"),[r,e,n]),js)}function Nu(t){try{return Iu(t),!0}catch{return!1}}class Pu extends L{constructor(e){super(`Value \`${e}\` is an invalid ERC-6492 wrapped signature.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"SignatureErc6492.InvalidWrappedSignatureError"})}}function ku({r:t,s:e,to:n="hex",v:r,yParity:s}){const o=(()=>{if(s===0||s===1)return s;if(r&&(r===27n||r===28n||r>=35n))return r%2n===0n?1:0;throw new Error("Invalid `v` or `yParity` value")})(),i=`0x${new Fr.Signature(Et(t),Et(e)).toCompactHex()}${o===0?"1b":"1c"}`;return n==="hex"?i:kr(i)}async function Ie(t,e){var c,a,u,f,l,d;const{address:n,hash:r,erc6492VerifierAddress:s=e.universalSignatureVerifierAddress??((u=(a=(c=t.chain)==null?void 0:c.contracts)==null?void 0:a.erc6492Verifier)==null?void 0:u.address),multicallAddress:o=e.multicallAddress??((d=(l=(f=t.chain)==null?void 0:f.contracts)==null?void 0:l.multicall3)==null?void 0:d.address)}=e,i=(()=>{const h=e.signature;return pr(h)?h:typeof h=="object"&&"r"in h&&"s"in h?ku(h):ae(h)})();try{return iu(i)?await Cu(t,{...e,multicallAddress:o,signature:i}):await Tu(t,{...e,verifierAddress:s,signature:i})}catch(h){try{if(me(Sr(n),await vo({hash:r,signature:i})))return!0}catch{}if(h instanceof At)return!1;throw h}}async function Cu(t,e){var A;const{address:n,blockNumber:r,blockTag:s,hash:o,multicallAddress:i}=e,{authorization:c,data:a,signature:u,to:f}=ou(e.signature);if(await je(t,{address:n,blockNumber:r,blockTag:s})===ge(["0xef0100",c.address]))return await Ou(t,{address:n,blockNumber:r,blockTag:s,hash:o,signature:u});const d={address:c.address,chainId:Number(c.chainId),nonce:Number(c.nonce),r:q(c.r,{size:32}),s:q(c.s,{size:32}),yParity:c.yParity};if(!await Yi({address:n,authorization:d}))throw new At;const y=await U(t,et,"readContract")({...i?{address:i}:{code:Tr},authorizationList:[d],abi:Or,blockNumber:r,blockTag:"pending",functionName:"aggregate3",args:[[...a?[{allowFailure:!0,target:f??n,callData:a}]:[],{allowFailure:!0,target:n,callData:nt({abi:zr,functionName:"isValidSignature",args:[o,u]})}]]}),g=(A=y[y.length-1])==null?void 0:A.returnData;if(g!=null&&g.startsWith("0x1626ba7e"))return!0;throw new At}async function Tu(t,e){const{address:n,factory:r,factoryData:s,hash:o,signature:i,verifierAddress:c,...a}=e,u=await(async()=>!r&&!s||Nu(i)?i:Su({data:s,signature:i,to:r}))(),f=c?{to:c,data:nt({abi:qn,functionName:"isValidSig",args:[n,o,u]}),...a}:{data:Eo({abi:qn,args:[n,o,u],bytecode:Bo}),...a},{data:l}=await U(t,pe,"call")(f).catch(d=>{throw d instanceof Ao?new At:d});if(Io(l??"0x0"))return!0;throw new At}async function Ou(t,e){const{address:n,blockNumber:r,blockTag:s,hash:o,signature:i}=e;if((await U(t,et,"readContract")({address:n,abi:zr,args:[o,i],blockNumber:r,blockTag:s,functionName:"isValidSignature"}).catch(a=>{throw a instanceof So?new At:a})).startsWith("0x1626ba7e"))return!0;throw new At}class At extends Error{}async function Ru(t,{address:e,message:n,factory:r,factoryData:s,signature:o,...i}){const c=Mr(n);return U(t,Ie,"verifyHash")({address:e,factory:r,factoryData:s,hash:c,signature:o,...i})}async function $u(t,e){const{address:n,factory:r,factoryData:s,signature:o,message:i,primaryType:c,types:a,domain:u,...f}=e,l=Ko({message:i,primaryType:c,types:a,domain:u});return U(t,Ie,"verifyHash")({address:n,factory:r,factoryData:s,hash:l,signature:o,...f})}function zu(t,{blockTag:e=t.experimental_blockTag??"latest",emitMissed:n=!1,emitOnBegin:r=!1,onBlock:s,onError:o,includeTransactions:i,poll:c,pollingInterval:a=t.pollingInterval}){const u=(()=>typeof c<"u"?c:!(t.transport.type==="webSocket"||t.transport.type==="ipc"||t.transport.type==="fallback"&&(t.transport.transports[0].config.type==="webSocket"||t.transport.transports[0].config.type==="ipc")))(),f=i??!1;let l;return u?(()=>{const y=Zt(["watchBlocks",t.uid,e,n,r,f,a]);return Wt(y,{onBlock:s,onError:o},g=>ye(async()=>{var A;try{const b=await U(t,jt,"getBlock")({blockTag:e,includeTransactions:f});if(b.number!==null&&(l==null?void 0:l.number)!=null){if(b.number===l.number)return;if(b.number-l.number>1&&n)for(let N=(l==null?void 0:l.number)+1n;N<b.number;N++){const m=await U(t,jt,"getBlock")({blockNumber:N,includeTransactions:f});g.onBlock(m,l),l=m}}((l==null?void 0:l.number)==null||e==="pending"&&(b==null?void 0:b.number)==null||b.number!==null&&b.number>l.number)&&(g.onBlock(b,l),l=b)}catch(b){(A=g.onError)==null||A.call(g,b)}},{emitOnBegin:r,interval:a}))})():(()=>{let y=!0,g=!0,A=()=>y=!1;return(async()=>{try{r&&U(t,jt,"getBlock")({blockTag:e,includeTransactions:f}).then(m=>{y&&g&&(s(m,void 0),g=!1)}).catch(o);const b=(()=>{if(t.transport.type==="fallback"){const m=t.transport.transports.find(p=>p.config.type==="webSocket"||p.config.type==="ipc");return m?m.value:t.transport}return t.transport})(),{unsubscribe:N}=await b.subscribe({params:["newHeads"],async onData(m){var w;if(!y)return;const p=await U(t,jt,"getBlock")({blockNumber:(w=m.result)==null?void 0:w.number,includeTransactions:f}).catch(()=>{});y&&(s(p,l),g=!1,l=p)},onError(m){o==null||o(m)}});A=N,y||A()}catch(b){o==null||o(b)}})(),()=>A()})()}function Lu(t,e){const{abi:n,address:r,args:s,batch:o=!0,eventName:i,fromBlock:c,onError:a,onLogs:u,poll:f,pollingInterval:l=t.pollingInterval,strict:d}=e;return(()=>typeof f<"u"?f:typeof c=="bigint"?!0:!(t.transport.type==="webSocket"||t.transport.type==="ipc"||t.transport.type==="fallback"&&(t.transport.transports[0].config.type==="webSocket"||t.transport.transports[0].config.type==="ipc")))()?(()=>{const A=d??!1,b=Zt(["watchContractEvent",r,s,o,t.uid,i,l,A,c]);return Wt(b,{onLogs:u,onError:a},N=>{let m;c!==void 0&&(m=c-1n);let p,w=!1;const I=ye(async()=>{var v;if(!w){try{p=await U(t,es,"createContractEventFilter")({abi:n,address:r,args:s,eventName:i,strict:A,fromBlock:c})}catch{}w=!0;return}try{let S;if(p)S=await U(t,cn,"getFilterChanges")({filter:p});else{const k=await U(t,be,"getBlockNumber")({});m&&m<k?S=await U(t,rs,"getContractEvents")({abi:n,address:r,args:s,eventName:i,fromBlock:m+1n,toBlock:k,strict:A}):S=[],m=k}if(S.length===0)return;if(o)N.onLogs(S);else for(const k of S)N.onLogs([k])}catch(S){p&&S instanceof qr&&(w=!1),(v=N.onError)==null||v.call(N,S)}},{emitOnBegin:!0,interval:l});return async()=>{p&&await U(t,an,"uninstallFilter")({filter:p}),I()}})})():(()=>{const A=d??!1,b=Zt(["watchContractEvent",r,s,o,t.uid,i,l,A]);let N=!0,m=()=>N=!1;return Wt(b,{onLogs:u,onError:a},p=>((async()=>{try{const w=(()=>{if(t.transport.type==="fallback"){const S=t.transport.transports.find(k=>k.config.type==="webSocket"||k.config.type==="ipc");return S?S.value:t.transport}return t.transport})(),I=i?ne({abi:n,eventName:i,args:s}):[],{unsubscribe:v}=await w.subscribe({params:["logs",{address:r,topics:I}],onData(S){var $;if(!N)return;const k=S.result;try{const{eventName:P,args:R}=Lr({abi:n,data:k.data,topics:k.topics,strict:d}),C=vt(k,{args:R,eventName:P});p.onLogs([C])}catch(P){let R,C;if(P instanceof Ur||P instanceof _r){if(d)return;R=P.abiItem.name,C=($=P.abiItem.inputs)==null?void 0:$.some(x=>!("name"in x&&x.name))}const H=vt(k,{args:C?[]:{},eventName:R});p.onLogs([H])}},onError(S){var k;(k=p.onError)==null||k.call(p,S)}});m=v,N||m()}catch(w){a==null||a(w)}})(),()=>m()))})()}function Uu(t,{address:e,args:n,batch:r=!0,event:s,events:o,fromBlock:i,onError:c,onLogs:a,poll:u,pollingInterval:f=t.pollingInterval,strict:l}){const d=(()=>typeof u<"u"?u:typeof i=="bigint"?!0:!(t.transport.type==="webSocket"||t.transport.type==="ipc"||t.transport.type==="fallback"&&(t.transport.transports[0].config.type==="webSocket"||t.transport.transports[0].config.type==="ipc")))(),h=l??!1;return d?(()=>{const A=Zt(["watchEvent",e,n,r,t.uid,s,f,i]);return Wt(A,{onLogs:a,onError:c},b=>{let N;i!==void 0&&(N=i-1n);let m,p=!1;const w=ye(async()=>{var I;if(!p){try{m=await U(t,ns,"createEventFilter")({address:e,args:n,event:s,events:o,strict:h,fromBlock:i})}catch{}p=!0;return}try{let v;if(m)v=await U(t,cn,"getFilterChanges")({filter:m});else{const S=await U(t,be,"getBlockNumber")({});N&&N!==S?v=await U(t,yn,"getLogs")({address:e,args:n,event:s,events:o,fromBlock:N+1n,toBlock:S}):v=[],N=S}if(v.length===0)return;if(r)b.onLogs(v);else for(const S of v)b.onLogs([S])}catch(v){m&&v instanceof qr&&(p=!1),(I=b.onError)==null||I.call(b,v)}},{emitOnBegin:!0,interval:f});return async()=>{m&&await U(t,an,"uninstallFilter")({filter:m}),w()}})})():(()=>{let A=!0,b=()=>A=!1;return(async()=>{try{const N=(()=>{if(t.transport.type==="fallback"){const I=t.transport.transports.find(v=>v.config.type==="webSocket"||v.config.type==="ipc");return I?I.value:t.transport}return t.transport})(),m=o??(s?[s]:void 0);let p=[];m&&(p=[m.flatMap(v=>ne({abi:[v],eventName:v.name,args:n}))],s&&(p=p[0]));const{unsubscribe:w}=await N.subscribe({params:["logs",{address:e,topics:p}],onData(I){var S;if(!A)return;const v=I.result;try{const{eventName:k,args:$}=Lr({abi:m??[],data:v.data,topics:v.topics,strict:h}),P=vt(v,{args:$,eventName:k});a([P])}catch(k){let $,P;if(k instanceof Ur||k instanceof _r){if(l)return;$=k.abiItem.name,P=(S=k.abiItem.inputs)==null?void 0:S.some(C=>!("name"in C&&C.name))}const R=vt(v,{args:P?[]:{},eventName:$});a([R])}},onError(I){c==null||c(I)}});b=w,A||b()}catch(N){c==null||c(N)}})(),()=>b()})()}const Ds="0x5792579257925792579257925792579257925792579257925792579257925792",Vs=q(0,{size:32});async function af(t,e){const{account:n=t.account,capabilities:r,chain:s=t.chain,experimental_fallback:o,experimental_fallbackDelay:i=32,forceAtomic:c=!1,id:a,version:u="2.0.0"}=e,f=n?mt(n):null,l=e.calls.map(d=>{const h=d,y=h.abi?nt({abi:h.abi,functionName:h.functionName,args:h.args}):h.data;return{data:h.dataSuffix&&y?ue([y,h.dataSuffix]):y,to:h.to,value:h.value?q(h.value):void 0}});try{const d=await t.request({method:"wallet_sendCalls",params:[{atomicRequired:c,calls:l,capabilities:r,chainId:q(s.id),from:f==null?void 0:f.address,id:a,version:u}]},{retryCount:0});return typeof d=="string"?{id:d}:d}catch(d){const h=d;if(o&&(h.name==="MethodNotFoundRpcError"||h.name==="MethodNotSupportedRpcError"||h.name==="UnknownRpcError"||h.details.toLowerCase().includes("does not exist / is not available")||h.details.toLowerCase().includes("missing or invalid. request()")||h.details.toLowerCase().includes("did not match any variant of untagged enum")||h.details.toLowerCase().includes("account upgraded to unsupported contract")||h.details.toLowerCase().includes("eip-7702 not supported")||h.details.toLowerCase().includes("unsupported wc_ method")||h.details.toLowerCase().includes("feature toggled misconfigured")||h.details.toLowerCase().includes("jsonrpcengine: response has no error or result for request"))){if(r&&Object.values(r).some(N=>!N.optional)){const N="non-optional `capabilities` are not supported on fallback to `eth_sendTransaction`.";throw new No(new K(N,{details:N}))}if(c&&l.length>1){const b="`forceAtomic` is not supported on fallback to `eth_sendTransaction`.";throw new Po(new K(b,{details:b}))}const y=[];for(const b of l){const N=ko(t,{account:f,chain:s,data:b.data,to:b.to,value:b.value?Et(b.value):void 0});y.push(N),i>0&&await new Promise(m=>setTimeout(m,i))}const g=await Promise.allSettled(y);if(g.every(b=>b.status==="rejected"))throw g[0].reason;const A=g.map(b=>b.status==="fulfilled"?b.value:Vs);return{id:ue([...A,q(s.id,{size:32}),Ds])}}throw Co(d,{...e,account:f,chain:e.chain})}}async function _u(t,e){async function n(f){if(f.endsWith(Ds.slice(2))){const d=yr(Hn(f,-64,-32)),h=Hn(f,0,-64).slice(2).match(/.{1,64}/g),y=await Promise.all(h.map(A=>Vs.slice(2)!==A?t.request({method:"eth_getTransactionReceipt",params:[`0x${A}`]},{dedupe:!0}):void 0)),g=(()=>y.some(A=>A===null)?100:y.every(A=>(A==null?void 0:A.status)==="0x1")?200:y.every(A=>(A==null?void 0:A.status)==="0x0")?500:600)();return{atomic:!1,chainId:fe(d),receipts:y.filter(Boolean),status:g,version:"2.0.0"}}return t.request({method:"wallet_getCallsStatus",params:[f]})}const{atomic:r=!1,chainId:s,receipts:o,version:i="2.0.0",...c}=await n(e.id),[a,u]=(()=>{const f=c.status;return f>=100&&f<200?["pending",f]:f>=200&&f<300?["success",f]:f>=300&&f<700?["failure",f]:f==="CONFIRMED"?["success",200]:f==="PENDING"?["pending",100]:[void 0,f]})();return{...c,atomic:r,chainId:s?fe(s):void 0,receipts:(o==null?void 0:o.map(f=>({...f,blockNumber:Et(f.blockNumber),gasUsed:Et(f.gasUsed),status:To[f.status]})))??[],statusCode:u,status:a,version:i}}async function cf(t,e){var a;const{account:n=t.account,chainId:r,nonce:s}=e;if(!n)throw new Oo({docsPath:"/docs/eip7702/prepareAuthorization"});const o=mt(n),i=(()=>{if(e.executor)return e.executor==="self"?e.executor:mt(e.executor)})(),c={address:e.contractAddress??e.address,chainId:r,nonce:s};return typeof c.chainId>"u"&&(c.chainId=((a=t.chain)==null?void 0:a.id)??await U(t,Hr,"getChainId")({})),typeof c.nonce>"u"&&(c.nonce=await U(t,rn,"getTransactionCount")({address:o.address,blockTag:"pending"}),(i==="self"||i!=null&&i.address&&me(i.address,o.address))&&(c.nonce+=1)),c}class qu extends K{constructor(e){super(`Call bundle failed with status: ${e.statusCode}`,{name:"BundleFailedError"}),Object.defineProperty(this,"result",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.result=e}}async function uf(t,e){const{id:n,pollingInterval:r=t.pollingInterval,status:s=({statusCode:g})=>g===200||g>=300,retryCount:o=4,retryDelay:i=({count:g})=>~~(1<<g)*200,timeout:c=6e4,throwOnFailure:a=!1}=e,u=Zt(["waitForCallsStatus",t.uid,n]),{promise:f,resolve:l,reject:d}=Ro();let h;const y=Wt(u,{resolve:l,reject:d},g=>{const A=ye(async()=>{const b=N=>{clearTimeout(h),A(),N(),y()};try{const N=await $o(async()=>{const m=await U(t,_u,"getCallsStatus")({id:n});if(a&&m.status==="failure")throw new qu(m);return m},{retryCount:o,delay:i});if(!s(N))return;b(()=>g.resolve(N))}catch(N){b(()=>g.reject(N))}},{interval:r,emitOnBegin:!0});return A});return h=c?setTimeout(()=>{y(),clearTimeout(h),d(new Hu({id:n}))},c):void 0,await f}class Hu extends K{constructor({id:e}){super(`Timed out while waiting for call bundle with id "${e}" to be confirmed.`,{name:"WaitForCallsStatusTimeoutError"})}}async function Fu(t,{serializedTransaction:e,throwOnReceiptRevert:n,timeout:r}){var c,a,u;const s=await t.request({method:"eth_sendRawTransactionSync",params:r?[e,q(r)]:[e]},{retryCount:0}),i=(((u=(a=(c=t.chain)==null?void 0:c.formatters)==null?void 0:a.transactionReceipt)==null?void 0:u.format)||zo)(s);if(i.status==="reverted"&&n)throw new Lo({receipt:i});return i}function Mu(t){var l,d,h;const{scheme:e,statement:n,...r}=((l=t.match(ju))==null?void 0:l.groups)??{},{chainId:s,expirationTime:o,issuedAt:i,notBefore:c,requestId:a,...u}=((d=t.match(Du))==null?void 0:d.groups)??{},f=(h=t.split("Resources:")[1])==null?void 0:h.split(`
- `).slice(1);return{...r,...u,...s?{chainId:Number(s)}:{},...o?{expirationTime:new Date(o)}:{},...i?{issuedAt:new Date(i)}:{},...c?{notBefore:new Date(c)}:{},...a?{requestId:a}:{},...f?{resources:f}:{},...e?{scheme:e}:{},...n?{statement:n}:{}}}const ju=/^(?:(?<scheme>[a-zA-Z][a-zA-Z0-9+-.]*):\/\/)?(?<domain>[a-zA-Z0-9+-.]*(?::[0-9]{1,5})?) (?:wants you to sign in with your Ethereum account:\n)(?<address>0x[a-fA-F0-9]{40})\n\n(?:(?<statement>.*)\n\n)?/,Du=/(?:URI: (?<uri>.+))\n(?:Version: (?<version>.+))\n(?:Chain ID: (?<chainId>\d+))\n(?:Nonce: (?<nonce>[a-zA-Z0-9]+))\n(?:Issued At: (?<issuedAt>.+))(?:\nExpiration Time: (?<expirationTime>.+))?(?:\nNot Before: (?<notBefore>.+))?(?:\nRequest ID: (?<requestId>.+))?/;function Vu(t){const{address:e,domain:n,message:r,nonce:s,scheme:o,time:i=new Date}=t;if(n&&r.domain!==n||s&&r.nonce!==s||o&&r.scheme!==o||r.expirationTime&&i>=r.expirationTime||r.notBefore&&i<r.notBefore)return!1;try{if(!r.address||!Ir(r.address,{strict:!1})||e&&!me(r.address,e))return!1}catch{return!1}return!0}async function Zu(t,e){const{address:n,domain:r,message:s,nonce:o,scheme:i,signature:c,time:a=new Date,...u}=e,f=Mu(s);if(!f.address||!Vu({address:n,domain:r,message:f,nonce:o,scheme:i,time:a}))return!1;const d=Mr(s);return Ie(t,{address:f.address,hash:d,signature:c,...u})}function Wu(t){return{call:e=>pe(t,e),createAccessList:e=>ts(t,e),createBlockFilter:()=>_i(t),createContractEventFilter:e=>es(t,e),createEventFilter:e=>ns(t,e),createPendingTransactionFilter:()=>Uo(t),estimateContractGas:e=>Hi(t,e),estimateGas:e=>Br(t,e),getBalance:e=>_o(t,e),getBlobBaseFee:()=>Fi(t),getBlock:e=>jt(t,e),getBlockNumber:e=>be(t,e),getBlockTransactionCount:e=>Mi(t,e),getBytecode:e=>je(t,e),getChainId:()=>Hr(t),getCode:e=>je(t,e),getContractEvents:e=>rs(t,e),getEip712Domain:e=>Di(t,e),getEnsAddress:e=>Ei(t,e),getEnsAvatar:e=>zi(t,e),getEnsName:e=>Li(t,e),getEnsResolver:e=>Ui(t,e),getEnsText:e=>Qr(t,e),getFeeHistory:e=>Wi(t,e),estimateFeesPerGas:e=>qo(t,e),getFilterChanges:e=>cn(t,e),getFilterLogs:e=>Gi(t,e),getGasPrice:()=>Ho(t),getLogs:e=>yn(t,e),getProof:e=>fu(t,e),estimateMaxPriorityFeePerGas:e=>Fo(t,e),fillTransaction:e=>Mo(t,e),getStorageAt:e=>lu(t,e),getTransaction:e=>Cr(t,e),getTransactionConfirmations:e=>du(t,e),getTransactionCount:e=>rn(t,e),getTransactionReceipt:e=>jo(t,e),multicall:e=>hu(t,e),prepareTransactionRequest:e=>Do(t,e),readContract:e=>et(t,e),sendRawTransaction:e=>Vo(t,e),sendRawTransactionSync:e=>Fu(t,e),simulate:e=>Xe(t,e),simulateBlocks:e=>Xe(t,e),simulateCalls:e=>Bu(t,e),simulateContract:e=>Au(t,e),verifyHash:e=>Ie(t,e),verifyMessage:e=>Ru(t,e),verifySiweMessage:e=>Zu(t,e),verifyTypedData:e=>$u(t,e),uninstallFilter:e=>an(t,e),waitForTransactionReceipt:e=>Zo(t,e),watchBlocks:e=>zu(t,e),watchBlockNumber:e=>Wo(t,e),watchContractEvent:e=>Lu(t,e),watchEvent:e=>Uu(t,e),watchPendingTransactions:e=>Go(t,e)}}function ff(t){const{key:e="public",name:n="Public Client"}=t;return Yo({...t,key:e,name:n,type:"publicClient"}).extend(Wu)}function lf(t){const{r:e,s:n}=Fr.Signature.fromCompact(t.slice(2,130)),r=+`0x${t.slice(130)}`,[s,o]=(()=>{if(r===0||r===1)return[void 0,r];if(r===27)return[BigInt(r),0];if(r===28)return[BigInt(r),1];throw new Error("Invalid yParityOrV value")})();return typeof s<"u"?{r:q(e,{size:32}),s:q(n,{size:32}),v:s,yParity:o}:{r:q(e,{size:32}),s:q(n,{size:32}),yParity:o}}export{Qu as A,qu as B,Jo as C,Fe as D,Ju as E,qi as F,Ki as G,tf as H,lf as I,of as J,ku as K,je as L,Hu as W,uf as a,Fu as b,Au as c,es as d,Ji as e,Lu as f,rs as g,Hi as h,_u as i,Fn as j,Mn as k,ff as l,Wu as m,vu as n,ef as o,cf as p,Ft as q,et as r,af as s,Ai as t,ou as u,iu as v,rf as w,mn as x,ne as y,st as z};
